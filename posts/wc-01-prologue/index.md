# 黑盒出关・三把钥匙定江湖


江湖传言，西土浏览器界有隐世高人，名曰“原生老祖”。老祖膝下三徒，各执一柄钥匙，开得了黑盒，锁得住乾坤。今日大话，诸位英雄且把耳洞放大，听我一一道来！

<!--more-->

## 第一折・黑盒现世

昔日，React 少侠仗虚拟 DOM 之剑，Vue 剑仙携响应式绫罗，双雄争霸，血溅前端。

忽一日，电闪雷鸣，Chrome 山、Firefox 谷、Safari 崖三地同时金光乍现——一只乌漆嘛黑的小盒破空而出，盒上无门无派，只刻八字：

> **不拜山头，自成一派。**
{.blockquote-center}

盒盖一开，三股真气冲天而起，惊得 React 剑锋一抖，Vue 绫罗乱颤。众修士齐呼：

“此乃何物？”

盒中悠悠传出一声：

“Web Components——浏览器亲儿子，江湖诨号：黑盒扫地僧。”

---

## 第二折・三把钥匙镇山门

### 铸兵符・Custom Elements

凡得此符者，可铸自家神兵。  

```html
<my-dog food="hotpot" mood="happy"></my-dog>
```

今日起，标签随你姓，语义随你编，浏览器照单全收，不查户口。

### 影分身・Shadow DOM

此术一开，样式、DOM、事件皆入黑屋，外头 CSS 千军万马，休想踏进半步。

> “兄弟，你的 `!important` 呢？”  
> “抱歉，进了影分身，天王老子也得排队。”

### 袖里乾坤・HTML Templates & Slots

袖中一抖，模板千军万马；插槽轻点，内容各就各位。

无需编译，无需打包，一颗 `<template>` 漂洋过海，落地即插即用。  

> 这是真正意义上的“一次编写，到处运行”——比 Java 当年喊的口号还真。

---

## 第三折・风云再起

黑盒既出，江湖格局瞬变：

- **微前端**：Vue2、Vue3、React18、Angular 同屏共舞，互不打脸。  
- **设计系统**：按钮、输入框、LOGO 化身“原子暗器”，任何门派伸手即取。  
- **长尾奇袭**：Chrome 插件、VS Code 插件、微信小程序、低代码山寨，皆呼“真香”。  
- **长寿秘籍**：框架蜜月三年，黑盒随浏览器升级十年，npm 弃坑它不弃。

---

## 第四折・范式转移・浏览器登堂入室

当日头西斜，江湖忽然风起。众侠回头一看，浏览器老馆主身披龙袍、脚踏赤霄，一步跨上金銮殿。  

### 旧朝遗诏：从“虚拟机”到“原生执政”  

过去二十年，前端史是一部“夺权史”：  

- jQuery 夺的是 DOM 的刀；  
- Angular 夺的是模块的印；  
- React 夺的是渲染的剑；  
- Vue 夺的是状态的符。  

四把大印加身，浏览器反成“空壳天子”。

而今，老馆主一声令下：“朕即框架，诸卿退班！”

### 三权分立：新标准下的江湖秩序  

| 权柄 | 归属 | 职责 | 口号 |
|---|---|---|---|
| **立法权** | WHATWG/W3C | 写圣旨（HTML、CSS、DOM 标准） | “凡入典章，万世不易。” |
| **执法权** | 浏览器内核 | 掌御林军（渲染管线、沙箱、安全） | “有朕一日，天下无刀兵。” |
| **行政权** | 开发者 & 工具链 | 管民生（DX、脚手架、调试器） | “百姓只用敲锣，不必造炮。” |

Web Components 正是老馆主钦点的 **“锦衣卫”**。

### 去框架化的三重暗涌  

1. **编译终点迁移**

   昨日：Babel/Vite → React/Vue 运行时；

   今日：Babel/Vite → Web Components 原生指令。

   框架退居“DX 大臣”，不再染指最终字节码。

2. **生态颗粒度下沉**

   UI 库不再打包成“全家桶”，而是 CDN 单文件组件：

   ```
   https://unpkg.com/@ui/button.js
   ```  

   按需即取，HTTP 缓存即版本管理，npm install 沦为可选项。

3. **生命周期归一**

   React 的 `useEffect`、Vue 的 `onMounted`、Svelte 的 `onMount`，

   最终都得翻译成同一套浏览器生命周期：

   `connectedCallback`、`disconnectedCallback`、`attributeChangedCallback`。

   框架语法糖越甜，底层 API 越收敛，直至“糖衣”可有可无。

### 未来图景：十年后的登基大典  

- **2027**：浏览器内置 signals 提案落地，状态管理回归原生；  
- **2029**：CSS `@scope` + `@state` 双剑合璧，Shadow DOM 自带响应式；  
- **2031**：HTTP/4 多路复用 + Import Map 2.0，让“一行 `<script type=importmap>` 即 CDN 全图”成为标配。  

届时，开发者只需写：  

```html
<my-app></my-app>
<script type="module" src="app.js"></script>
```  

框架？

“哦，那是旧朝遗老，偶尔进宫讲史罢了。”

> 老馆主抚须长笑：  
> “昔日你们借我地基起高楼，今日我把高楼收归国有。
>
> 范式逆流，不是革命，是回家。”

---

## 尾声・血雨腥风

> “老衲不挑框架，不拒工具，但有一语相赠：  
> 十年之后，你迁移的是框架，还是我？”

江湖血雨腥风，黑盒已开。

要么守着旧山门，十年后再为迁移埋单；

要么此刻随扫地僧下山，让代码像 HTML 一样长青。

**下回分解**：

“5 分钟，一指定乾坤——纯原生撸一只可复用计数器，再扔进 React、Vue、Svelte 乱炖！”

---

> [!NOTE]
> 哈哈哈哈哈哈哈，以抖机灵的形式简单聊了一下 Web Components 的发展历程和未来趋势。
>
> 我对 Web Components 充满了浓厚的兴趣，决定花点时间研究研究。  
> 剩余的内容在 [Web Components 系列文章](/collections/web-components/) 将会持续更新，敬请期待！


---

> 作者: [Lruihao](https://github.com/Lruihao)  
> URL: https://lruihao.cn/posts/wc-01-prologue/  

