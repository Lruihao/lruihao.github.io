# Vim 速查表


Vim 速查表 - 帮你提高 N 倍效率

<!--more-->

## 进入 vim

| 命令                   | 描述                                              |
| :--------------------- | :------------------------------------------------ |
| vim filename           | 打开或新建文件，并将光标置于第一行首              |
| vim +n filename        | 打开文件，并将光标置于第 n 行首                   |
| vim + filename         | 打开文件，并将光标置于最后一行首                  |
| vim +/pattern filename | 打开文件，并将光标置于第一个与 pattern 匹配的串处 |
| vim -r filename        | 在上次正用 vim 编辑时发生系统崩溃，恢复 filename  |
| vim filename….filename | 打开多个文件，依次编辑                            |

## vim 配置

| 命令                       | 描述                                                                 |
| :------------------------- | :------------------------------------------------------------------- |
| all                        | 列出所有选项设置情况                                                 |
| term                       | 设置终端类型                                                         |
| ignorance                  | 在搜索中忽略大小写                                                   |
| list                       | 显示制表位 (Ctrl+I) 和行尾标志（$)                                   |
| number                     | 显示行号                                                             |
| report                     | 显示由面向行的命令修改过的数目                                       |
| terse                      | 显示简短的警告信息                                                   |
| warn                       | 在转到别的文件时若没保存当前文件则显示 NO write 信息                 |
| nomagic                    | 允许在搜索模式中，使用前面不带“\”的特殊字符                          |
| nowrapscan                 | 禁止 vi 在搜索到达文件两端时，又从另一端开始                         |
| mesg                       | 允许 vi 显示其他用户用 write 写到自己终端上的信息                    |
| :set number / set nonumber | 显示/不显示行号                                                      |
| :set ruler /set noruler    | 显示/不显示标尺                                                      |
| :set hlsearch              | 高亮显示查找到的单词                                                 |
| :set nohlsearch            | 关闭高亮显示                                                         |
| :syntax on                 | 语法高亮                                                             |
| :set nu                    | 显示行号                                                             |
| :set tabstop=8             | 设置 tab 大小，8 为最常用最普遍的设置                                |
| :set softtabstop=8         | 4:4 个空格，8: 正常的制表符，12: 一个制表符 4 个空格，16: 两个制表符 |
| :set autoindent            | 自动缩进                                                             |
| :set cindent               | C 语言格式里面的自动缩进                                             |

## 移动光标

| 命令      | 描述                                       |
| :-------- | :----------------------------------------- |
| k nk      | 上 向上移动 n 行                           |
| j nj      | 下 向下移动 n 行                           |
| h nh      | 左 向左移动 n 行                           |
| l nl      | 右 向右移动 n 行                           |
| Space     | 光标右移一个字符                           |
| Backspace | 光标左移一个字符                           |
| Enter     | 光标下移一行                               |
| w/W       | 光标右移一个字至字首                       |
| b/B       | 光标左移一个字至字首                       |
| e 或 E    | 光标右移一个字至字尾                       |
| )         | 光标移至句尾                               |
| (         | 光标移至句首                               |
| }         | 光标移至段落开头                           |
| {         | 光标移至段落结尾                           |
| n$        | 光标移至第 n 行尾                          |
| H         | 光标移至屏幕顶行                           |
| M         | 光标移至屏幕中间行                         |
| L         | 光标移至屏幕最后行                         |
| 0         | （注意是数字零）光标移至当前行首           |
| ^         | 移动光标到行首第一个非空字符上去           |
| $         | 光标移至当前行尾                           |
| gg        | 移到第一行                                 |
| G         | 移到最后一行                               |
| f         | 移动光标到当前行的字符 a 上                |
| F         | 相反                                       |
| %         | 移动到与制匹配的括号上去（），{}，[]，<>等 |
| nG        | 移动到第 n 行上                            |
| G         | 到最后一行                                 |

## 屏幕滚动

| 命令      | 描述                                                   |
| :-------- | :----------------------------------------------------- |
| Ctrl+u    | 向文件首翻半屏                                         |
| Ctrl+d    | 向文件尾翻半屏                                         |
| Ctrl+f    | 向文件尾翻一屏                                         |
| Ctrl ＋ b | 向文件首翻一屏                                         |
| nz        | 将第 n 行滚至屏幕顶部，不指定 n 时将当前行滚至屏幕顶部 |

## 插入文本类

| 命令    | 描述                                                 |
| :------ | :--------------------------------------------------- |
| i       | 在光标前                                             |
| I       | 在当前行首                                           |
| a       | 光标后                                               |
| A       | 在当前行尾                                           |
| o       | 在当前行之下新开一行                                 |
| O       | 在当前行之上新开一行                                 |
| r       | 替换当前字符                                         |
| R       | 替换当前字符及其后的字符，直至按 ESC 键              |
| s       | 从当前光标位置处开始，以输入的文本替代指定数目的字符 |
| S       | 删除指定数目的行，并以所输入文本代替之               |
| ncw/nCW | 修改指定数目的字                                     |
| nCC     | 修改指定数目的行                                     |

## 删除命令

| 命令      | 描述                                               |
| :-------- | :------------------------------------------------- |
| x/X       | 删除一个字符，x 删除光标后的，而 X 删除光标前的    |
| dw        | 删除一个单词（删除光标位置到下一个单词开始的位置） |
| dnw       | 删除 n 个单词                                      |
| dne       | 也可，只是删除到单词尾                             |
| do        | 删至行首                                           |
| d$        | 删至行尾                                           |
| dd        | 删除一行                                           |
| ndd       | 删除当前行及其后 n-1 行                            |
| dnl       | 向右删除 n 个字母                                  |
| dnh       | 向左删除 n 个字母                                  |
| dnj       | 向下删除 n 行，当前行 + 其上 n 行                    |
| dnk       | 向上删除 n 行，当期行 + 其下 n 行                    |
| cnw[word] | 将 n 个 word 改变为 word                           |
| C$        | 改变到行尾                                         |
| cc        | 改变整行                                           |
| shift+j   | 删除行尾的换行符，下一行接上来了                   |

## 复制粘贴

| 命令 | 描述                     |
| :--- | :----------------------- |
| p    | 粘贴用 x 或 d 删除的文本 |
| ynw  | 复制 n 个单词            |
| yy   | 复制一行                 |
| ynl  | 复制 n 个字符            |
| y$   | 复制当前光标至行尾处     |
| nyy  | 拷贝 n 行                |

## 撤销

| 命令      | 描述                 |
| :-------- | :------------------- |
| u         | 撤销前一次的操作     |
| shif+u(U) | 撤销对该行的所有操作 |

## 搜索及替换

| 命令                     | 描述                                                         |
| :----------------------- | :----------------------------------------------------------- |
| /pattern                 | 从光标开始处向文件尾搜索 pattern                             |
| ?pattern                 | 从光标开始处向文件首搜索 pattern                             |
| n                        | 在同一方向重复上一次搜索命令                                 |
| N                        | 在反方向上重复上一次搜索命令                                 |
| cw newword               | 替换为 newword                                               |
| n                        | 继续查找                                                     |
| .                        | 执行替换                                                     |
| :s/p1/p2/g               | 将当前行中所有 p1 均用 p2 替代，g 表示执行 用 c 表示需要确认 |
| :n1,n2 s/p1/p2/g         | 将第 n1 至 n2 行中所有 p1 均用 p2 替代                       |
| :g/p1/s//p2/g            | 将文件中所有 p1 均用 p2 替换                                 |
| :1,$ s/string1/string2/g | 在全文中将 string1 替换为 string2                            |

## 书签

| 命令   | 描述                                      |
| :----- | :---------------------------------------- |
| m[a-z] | 在文中做标记，标记号可为 a-z 的 26 个字母 |
| `a     | 移动到标记 a 处                           |

## visual 模式

| 命令                              | 描述                                                                                                                |
| :-------------------------------- | :------------------------------------------------------------------------------------------------------------------ |
| v                                 | 进入 visual 模式                                                                                                    |
| V                                 | 进入行的 visual 模式                                                                                                |
| ctrl+v                            | 进如块操作模式用 o 和 O 改变选择的边的大小                                                                          |
| 在所有行插入相同的内容如 include< | 将光标移到开始插入的位置，按 CTRL+V 进入 VISUAL 模式，选择好模块后按 I（shift+i)，后插入要插入的文本，按 [ESC] 完成 |

## 行方式命令

| 命令                                                     | 描述                                                    |
| :------------------------------------------------------- | :------------------------------------------------------ |
| :n1,n2 co n3                                             | 将 n1 行到 n2 行之间的内容拷贝到第 n3 行下              |
| :n1,n2 m n3                                              | 将 n1 行到 n2 行之间的内容移至到第 n3 行下              |
| :n1,n2 d                                                 | 将 n1 行到 n2 行之间的内容删除                          |
| :n1,n2 w!command                                         | 将文件中 n1 行至 n2 行的内容作为 command 的输入并执行之 |
| 若不指定 n1，n2，则表示将整个文件内容作为 command 的输入 |                                                         |

## 宏

| 命令   | 描述                                                             |
| :----- | :--------------------------------------------------------------- |
| q[a-z] | 开始记录但前开始的操作为宏，名称可为【a-z】，然后用 q 终止录制宏 |
| reg    | 显示当前定义的所有的宏，用@[a-z] 来在当前光标处执行宏 [a-z]      |

## 窗口操作

| 命令           | 描述                                       |
| :------------- | :----------------------------------------- |
| :split         | 分割一个窗口                               |
| :split file.c  | 为另一个文件 file.c 分隔窗口               |
| :nsplit file.c | 为另一个文件 file.c 分隔窗口，并指定其行数 |
| ctrl ＋ w      | 在窗口中切换                               |
| :close         | 关闭当前窗口                               |

## 文件及其他

| 命令                | 描述                                         |
| :------------------ | :------------------------------------------- |
| :q                  | 退出 vi                                      |
| :q!                 | 不保存文件并退出 vi                          |
| :e filename         | 打开文件 filename 进行编辑                   |
| :e!                 | 放弃修改文件内容，重新载入该文件编辑         |
| :w                  | 保存当前文件                                 |
| :wq                 | 存盘退出                                     |
| :ZZ                 | 保存当前文档并退出 VIM                       |
| :!command           | 执行 shell 命令 command                      |
| :r!command          | 将命令 command 的输出结果放到当前行          |
| :n1,n2 write temp.c |                                              |
| :read file.c        | 将文件 file.c 的内容插入到当前光标所在的下面 |


---

> 作者: [Lruihao](https://github.com/Lruihao)  
> URL: https://lruihao.cn/posts/vim/  
> 转载 URL: https://www.jianshu.com/p/6aa2e0e39f99
