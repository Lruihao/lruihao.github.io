# 磁盘存储器的管理


## 外存的组织方式

### 连续组织方式

- 连续组织方式的优点

  - 顺序访问容易
  - 顺序访问速度快

- 连续组织方式的缺点

  - 分配连续的存储空间
  - 必须知道文件长度
  - 删除与插入数据不灵活
  - 动态增长的文件分配空间问题

### 链接组织方式

- 隐式链接
- 显式链接

### FAT 技术

- FAT12

  - 早期的 FAT12 文件系统
  - 以簇为单位的 FAT12 文件系统

- FAT16
- FAT32

### NTFS 的文件组织方式

- NTFS 新特征
- 磁盘组织
- 文件的组织

### 索引组织方式

- 单级索引组织方式
- 多级索引组织方式
- 增量式索引组织方式

  - 增量式索引组织方式的基本思想
  - UNIX System V 的组织方式

    - 直接地址
    - 一次间接地址
    - 多次间接地址

## 文件存储空间的管理

### 空闲表法和空闲链表法

- 空闲表法

  - 空闲表
  - 存储空间的分配与回收

- 空闲链表法

  - 空闲盘块链
  - 空闲盘区链

### 位示图法

- 位示图
- 盘块的分配（步骤）

  - 1. 顺序扫描示图
  - 2. 转换盘块号
  - 3. 修改位示图

- 盘块的回收（步骤）

  - 1. 盘块号转换成行列号
  - 2. 修改位示图

### 成组链接法

- 空闲盘块的组织
- 空闲盘块的分配与回收

## 提高磁盘 I/O 速度的途径

### 磁盘高速缓存

- 数据交付方式

  - 数据交付
  - 指针交付

- 置换算法
- 周期性地写回磁盘

### 提高磁盘 I/O 速度的其他方法

- 提前读
- 延迟写
- 优化物理块的分布
- 虚拟盘

### 廉价磁盘冗余阵列 (RAID)

- 并行交叉存取
- RAID 的分级

  - RAID 0 级
  - RAID 1 级
  - RAID 2 级
  - RAID 3 级
  - RAID 4 级
  - RAID 5 级
  - RAID 6 级和 RAID 7 级

- RAID 的优点

  - 可靠性高
  - 磁盘 I/O 速度高
  - 性价比高

## 提高磁盘可靠性的技术

### 第一级容错技术 SFT-Ⅰ

- 双份目录和双份文件分配表
- 热修复重定向和写后读校验

  - 热修复重定向
  - 写后读校验方式

### 第二级容错技术 SFT-Ⅱ

- 磁盘镜像
- 磁盘双工

### 基于集群技术的容错功能

- 双机热备份模式
- 双机互为备份模式
- 公用磁盘模式

### 后备系统

- 磁带机
- 硬盘

  - 移动磁盘
  - 固定硬盘驱动器

- 光盘驱动器

  - CD-ROM 和 DVD-ROM
  - 刻录机

## 数据一致性控制

### 事务

- 事务的定义
- 事务记录
- 恢复算法

  - undo <Ti\>
  - redo <Ti\>

### 检查点

- 检查点的作用
- 新的恢复算法

### 并发控制

- 利用互斥锁实现“顺序性”
- 利用互斥锁和共享锁实现顺序性

### 重复数据的数据一致性问题

- 重复文件的一致性
- 链接数一致性检查


---

> 作者: [Lruihao](https://github.com/Lruihao)  
> URL: https://lruihao.cn/posts/cipanadmin/  

