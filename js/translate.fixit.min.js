(()=>{var g=!0,u=!0,m=[],h=[],v=[],I=[],p=["https://fixit.lruihao.cn","Cell+"],f=["chinese_simplified","chinese_traditional"],b="translate.service",y=[{id:"corsican",name:"hinaassicurasol",serviceId:"co"},{id:"guarani",name:"ondoho",serviceId:"gn"},{id:"kinyarwanda",name:"Kinyarwanda",serviceId:"rw"},{id:"hausa",name:"dictionary variant",serviceId:"ha"},{id:"norwegian",name:"Norge",serviceId:"no"},{id:"dutch",name:"nederlands",serviceId:"nl"},{id:"yoruba",name:"Yoruba",serviceId:"yo"},{id:"english",name:"English",serviceId:"en"},{id:"gongen",name:"\u0917\u094B\u0902\u0917\u0947\u0928 \u0939\u0947\u0902 \u0928\u093E\u0902\u0935",serviceId:"gom"},{id:"latin",name:"Latina",serviceId:"la"},{id:"nepali",name:"\u0928\u0947\u092A\u093E\u0932\u0940Name",serviceId:"ne"},{id:"french",name:"Fran\xE7ais",serviceId:"fr"},{id:"czech",name:"\u010Desk\xFD",serviceId:"cs"},{id:"hawaiian",name:"paneke\u02BBhaka",serviceId:"haw"},{id:"georgian",name:"\u10EF\u10DD\u10E0\u10EF\u10D8\u10D0\u10DC\u10D8Name",serviceId:"ka"},{id:"russian",name:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A",serviceId:"ru"},{id:"chinese_simplified",name:"\u7B80\u4F53\u4E2D\u6587",serviceId:"zh-CN"},{id:"persian",name:"Persian",serviceId:"fa"},{id:"bhojpuri",name:"\u0939\u092E\u093E\u0930 \u0915\u092A\u093E\u0930 \u0926\u0930\u094D\u0926 \u0915\u0930\u0924\u093E\u0964",serviceId:"bho"},{id:"hindi",name:"\u0939\u093F\u0928\u094D\u0926\u0940",serviceId:"hi"},{id:"belarusian",name:"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044FName",serviceId:"be"},{id:"swahili",name:"Kiswahili",serviceId:"sw"},{id:"icelandic",name:"\xCDslandName",serviceId:"is"},{id:"yiddish",name:"\u05D9\u05D9\u05B7\u05D3\u05D9\u05E9",serviceId:"yi"},{id:"twi",name:"Ma fr\u025B",serviceId:"ak"},{id:"irish",name:"\xCDris",serviceId:"ga"},{id:"gujarati",name:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",serviceId:"gu"},{id:"khmer",name:"\u1781\u17D2\u1798\u17C2\u179AKCharselect unicode block name",serviceId:"km"},{id:"slovak",name:"Slovensk\xE1",serviceId:"sk"},{id:"hebrew",name:"\u05D4\u05D9\u05D1\u05E8\u05D9\u05EA",serviceId:"iw"},{id:"kannada",name:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1\u0CCDName",serviceId:"kn"},{id:"hungarian",name:"magyar",serviceId:"hu"},{id:"tamil",name:"\u0BA4\u0BBE\u0BAE\u0BBF\u0BB2\u0BCD",serviceId:"ta"},{id:"arabic",name:"\u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",serviceId:"ar"},{id:"bengali",name:"\u09AC\u09C7\u0999\u09CD\u0997\u09BE\u09B2\u09C0",serviceId:"bn"},{id:"azerbaijani",name:"azerbaijani",serviceId:"az"},{id:"samoan",name:"lifiava",serviceId:"sm"},{id:"afrikaans",name:"afrikaans",serviceId:"af"},{id:"indonesian",name:"IndonesiaName",serviceId:"id"},{id:"danish",name:"dansk",serviceId:"da"},{id:"shona",name:"Shona",serviceId:"sn"},{id:"bambara",name:"Bamanankan",serviceId:"bm"},{id:"lithuanian",name:"Lietuva",serviceId:"lt"},{id:"vietnamese",name:"Ti\u1EBFng Vi\u1EC7t",serviceId:"vi"},{id:"maltese",name:"Malti",serviceId:"mt"},{id:"turkmen",name:"T\xFCrkmen\xE7e",serviceId:"tk"},{id:"assamese",name:"assamese",serviceId:"as"},{id:"catalan",name:"catal\xE0",serviceId:"ca"},{id:"singapore",name:"\u0DC3\u0DD2\u0D82\u0D9C\u0DCF\u0DB4\u0DD4\u0DBB\u0DCA",serviceId:"si"},{id:"cebuano",name:"cebuano",serviceId:"ceb"},{id:"sanskrit",name:"Sanskrit",serviceId:"sa"},{id:"polish",name:"Polski",serviceId:"pl"},{id:"galician",name:"galico",serviceId:"gl"},{id:"latvian",name:"latvie\u0161u",serviceId:"lv"},{id:"ukrainian",name:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430Name",serviceId:"uk"},{id:"tatar",name:"\u0422\u0430\u0442\u0430\u0440",serviceId:"tt"},{id:"scottish_gaelic",name:"G\xE0idhlig na h-Alba",serviceId:"gd"},{id:"welsh",name:"color name",serviceId:"cy"},{id:"japanese",name:"\u65E5\u672C\u8A9E",serviceId:"ja"},{id:"filipino",name:"Pilipino",serviceId:"tl"},{id:"aymara",name:"aymara.",serviceId:"ay"},{id:"lao",name:"\u0E81\u0EB0\u0EA3\u0EB8\u0E99\u0EB2",serviceId:"lo"},{id:"telugu",name:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41QFontDatabase",serviceId:"te"},{id:"romanian",name:"Rom\xE2n\u0103",serviceId:"ro"},{id:"haitian_creole",name:"Krey\xF2l ayisyen",serviceId:"ht"},{id:"dogrid",name:"\u0915\u0941\u0915\u0941\u0930\u092E\u0941\u0924\u094D\u0924\u093E",serviceId:"doi"},{id:"swedish",name:"Svenska",serviceId:"sv"},{id:"maithili",name:"\u092E\u0930\u093E\u0924\u093F\u0932\u0940Name",serviceId:"mai"},{id:"thai",name:"\u0E04\u0E19\u0E44\u0E17\u0E22",serviceId:"th"},{id:"armenian",name:"\u0531\u0580\u0574\u0565\u0576\u0575\u0561\u0576",serviceId:"hy"},{id:"burmese",name:"\u1017\u102C\u101B\u1019\u103A",serviceId:"my"},{id:"pashto",name:"\u067E\u069A\u062A\u0648Name",serviceId:"ps"},{id:"hmong",name:"hmong",serviceId:"hmn"},{id:"dhivehi",name:"\u078B\u07A8\u0788\u07A7\u0783\u07A9\u0788\u07B0",serviceId:"dv"},{id:"chinese_traditional",name:"\u7E41\u9AD4\u4E2D\u6587",serviceId:"zh-TW"},{id:"luxembourgish",name:"L\xEBtzebuergeschName",serviceId:"lb"},{id:"sindhi",name:"\u0633\u0646\u068C\u064A",serviceId:"sd"},{id:"kurdish",name:"Kurd\xEE",serviceId:"ku"},{id:"turkish",name:"T\xFCrk\xE7e",serviceId:"tr"},{id:"macedonian",name:"\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438",serviceId:"mk"},{id:"bulgarian",name:"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",serviceId:"bg"},{id:"malay",name:"Malay",serviceId:"ms"},{id:"luganda",name:"luganda",serviceId:"lg"},{id:"marathi",name:"\u092E\u0930\u093E\u0920\u0940Name",serviceId:"mr"},{id:"estonian",name:"eesti keel",serviceId:"et"},{id:"malayalam",name:"\u0D2E\u0D32\u0D2E\u0D3E\u0D32\u0D02",serviceId:"ml"},{id:"deutsch",name:"Deutsch",serviceId:"de"},{id:"slovene",name:"sloven\u0161\u010Dina",serviceId:"sl"},{id:"urdu",name:"\u0627\u0648\u0631\u062F\u0648",serviceId:"ur"},{id:"portuguese",name:"portugu\xEAs",serviceId:"pt"},{id:"igbo",name:"igbo",serviceId:"ig"},{id:"kurdish_sorani",name:"\u06A9\u0648\u0631\u062F\u06CC \u0633\u06C6\u0631\u0627\u0646\u06CC",serviceId:"ckb"},{id:"oromo",name:"adeta",serviceId:"om"},{id:"greek",name:"\u03B5\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",serviceId:"el"},{id:"spanish",name:"Espa\xF1ol",serviceId:"es"},{id:"frisian",name:"frysk",serviceId:"fy"},{id:"somali",name:"Soomaali",serviceId:"so"},{id:"amharic",name:"amharic",serviceId:"am"},{id:"nyanja",name:"potakuyan",serviceId:"ny"},{id:"punjabi",name:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40Name",serviceId:"pa"},{id:"basque",name:"baskoa",serviceId:"eu"},{id:"italian",name:"italiano",serviceId:"it"},{id:"albanian",name:"albanian",serviceId:"sq"},{id:"korean",name:"\uD55C\uAD6D\uC5B4",serviceId:"ko"},{id:"tajik",name:"\u0422\u0430jik\u04E3Name",serviceId:"tg"},{id:"finnish",name:"suomi",serviceId:"fi"},{id:"kyrgyz",name:"\u041A\u044B\u0440\u0433\u044B\u0437 \u0442\u0438\u043B\u0438",serviceId:"ky"},{id:"ewe",name:"E\u028Begbe",serviceId:"ee"},{id:"croatian",name:"hrvatski",serviceId:"hr"},{id:"creole",name:"a n:n",serviceId:"kri"},{id:"quechua",name:"Quechua",serviceId:"qu"},{id:"bosnian",name:"bosnian",serviceId:"bs"},{id:"maori",name:"Maori",serviceId:"mi"}];var L=["fi-at-ignore","header-title","language-switch","post-author","powered","author","typeit","katex","katex-display","message-content"],w=["repo-url","repo-visibility","repo-lang","netease-music","comment-163"],k=['[data-adapters="projects"] .single-subtitle'],T=["Hugo","FixIt","hugo-fixit","Lruihao","shortcode","CC BY-NC-SA","RSS"];var{hugoLangCodes:E,hugoLangMap:S,fromLanguages:C,onlyLocalLang:M,nomenclature:x}=window.ATConfig,l=window.fixit,a=window.translate,c=class{service=b;languages=f;ignoreClass=[...L,...w,...m];ignoreID=h;ignoreTag=I;ignoreSelector=[...k,...v];ignoreText=[...T,...p];detectLocalLanguage=g;enterprise=u;isMobile=l.util.isMobile();afterExecuteEvents=new Set;lang={...this.getTypesLang()};supportLanguages={"client.edge":a.service.edge.language.json,"translate.service":y};hugoLangCodes=E;hugoLangMap=S;fromLanguages=C||[];onlyLocalLang=M;nomenclature=x;dom={};constructor(){}getLangNameById(e){return this.supportLanguages[this.service]?.find(i=>i.id===e)?.name}getLangCodeById(e){return Object.keys(a.util.browserLanguage).find(i=>a.util.browserLanguage[i]===e)||""}getLangIdByCode(e){return a.util.browserLanguage[e]}getTypesLang(){return{current:a.language.getCurrent(),local:window.ATConfig.local||a.language.getLocal(),query:window.location.search.split("lang=")[1],browser:this.lang?.browser||""}}toggleVisibility(e,i){e.classList.toggle("d-none",!i),e.setAttribute("aria-hidden",!i+"")}toggleMenuActive(e){Array.from(this.dom.switchMenu.childNodes).filter(i=>i.classList.contains("active")).forEach(i=>{i.classList.remove("active")}),e.classList.add("active")}handleDesktop(){if(this.dom.switchDesktop=document.querySelector("#header-desktop .language-switch.auto"),!this.dom.switchDesktop)return;this.dom.switchMenu=this.dom.switchDesktop.querySelector(".sub-menu"),this.dom.localItems&&this.dom.switchMenu.append(...this.dom.localItems),this.handleArtificialItems(),this.handleMachineItems();let e=this.dom.switchDesktop.previousElementSibling;e.classList.contains("language-switch")&&this.toggleVisibility(e,!1),this.toggleVisibility(this.dom.switchDesktop,!0),this.afterExecuteEvents.add(()=>{this.lang={...this.getTypesLang()};let{current:i,local:t,query:n}=this.getTypesLang();if(this.lang={...this.lang,current:i,query:n},i!==t||n){let s=document.querySelector(`.menu-link[data-lang="${i}"]`);s&&s.parentElement&&this.toggleMenuActive(s.parentElement)}})}handleArtificialItems(){let e=Array.from(this.dom.switchMenu.childNodes).filter(i=>i.dataset.type==="artificial");l.util.forEach(e,i=>{if(i.classList.contains("active")&&!i.children[0].getAttribute("title")){let t=this.getLangNameById(this.lang.local);i.children[0].setAttribute("title",t),i.children[0].insertAdjacentText("beforeend",t)}i.addEventListener("click",t=>{a.language.clearCacheLanguage()})})}handleMachineItems(){let e=Array.from(this.dom.switchMenu.childNodes).filter(i=>i.dataset.type==="machine");l.util.forEach(e,i=>{let t=i.children[0].dataset.lang,n=this.getLangNameById(t),s=this.getLangCodeById(t);if(this.service==="client.edge"&&!n){this.toggleVisibility(i,!1);return}if(this.hugoLangCodes.includes(s)||t==this.lang.local){this.toggleVisibility(i,!1);return}i.addEventListener("click",o=>{window.history.pushState({},"",`?lang=${t}`),this.toggleMenuActive(i),a.changeLanguage(t)})})}handleMobile(){this.dom.switchMobile=document.querySelector("#header-mobile .language-switch.auto"),this.dom.switchMobile&&(this.selectOnChangeMobile(),this.afterExecuteEvents.add(()=>{new Promise(e=>{let i=setInterval(()=>{this.dom.selectEl=this.dom.switchMobile.querySelector("select"),this.dom.selectEl&&(clearInterval(i),e())},100)}).then(()=>{this.dom.selectEl.classList.add("language-select"),this.handleMachineOptions(),this.handleArtificialOptions();let{current:e,local:i,query:t}=this.getTypesLang();this.lang={...this.lang,current:e,query:t},(e!==i||t)&&(this.dom.selectEl.value=e),this.toggleVisibility(this.dom.switchMobile,!0)})}))}selectOnChangeMobile(){a.selectLanguageTag.selectOnChange=e=>{let i=e.target.value;e.target.options[e.target.selectedIndex].dataset.type==="artificial"?(a.language.clearCacheLanguage(),window.location=i):(window.history.pushState({},"",`?lang=${i}`),a.changeLanguage(i))}}handleMachineOptions(){l.util.forEach(this.dom.selectEl.querySelectorAll("option"),e=>{e.dataset.type="machine",e.innerText=`\u{1F916} ${e.innerText}`;let i=this.getLangCodeById(e.value);(this.hugoLangCodes.includes(i)||e.value==this.lang.local)&&e.parentElement.removeChild(e)})}handleArtificialOptions(){let e=this.dom.switchMobile.previousElementSibling;if(this.hugoLangCodes.length>1){l.util.forEach(e.querySelectorAll("option"),s=>{if(!s.getAttribute("value"))return s.parentElement.removeChild(s);s.dataset.type="artificial",s.innerText=`\u{1F464} ${s.innerText}`,s.disabled&&s.removeAttribute("disabled")}),this.dom.selectEl.prepend(...e.querySelectorAll("option:not([selected])")),this.dom.selectEl.prepend(e.querySelector("option[selected]")),this.toggleVisibility(e,!1);return}let i=this.dom.switchMobile.querySelector('[role="button"]'),t=this.getLangNameById(this.lang.local);i.dataset.current||(i.dataset.current=t,i.insertAdjacentText("afterbegin",t));let n=document.createElement("option");n.selected=!0,n.dataset.type="artificial",n.value=window.location.pathname,n.innerText=`\u{1F464} ${t}`,this.dom.selectEl.prepend(n),this.toggleVisibility(e,!1)}handle(){return this.isMobile?this.handleMobile():this.handleDesktop(),this}setup(){return this.enterprise?a.enterprise.use():a.service.use(this.service),document.querySelectorAll(this.ignoreSelector.join(",")).forEach(e=>{e.classList.add("fi-at-ignore")}),this.nomenclature?.forEach(e=>{a.nomenclature.append(e.from,e.to,Object.keys(e.properties).map(i=>`${i}=${e.properties[i]}`).join(`
`))}),this.onlyLocalLang&&(this.fromLanguages=[this.lang.local]),a.language.translateLanguagesRange=this.fromLanguages,a.ignore.id.push(...this.ignoreID),a.ignore.class.push(...this.ignoreClass),a.ignore.tag.push(...this.ignoreTag),a.ignore.text.push(...this.ignoreText),a.language.setLocal(this.lang.local),a.language.setUrlParamControl("lang"),a.listener.start(),a.selectLanguageTag.show=this.isMobile,a.selectLanguageTag.languages=this.languages.join(","),this}execute(){a.execute(),this.afterExecuteEvents.forEach(e=>{e()})}translateAISummary(){let{current:e,local:i}=this.getTypesLang();if(typeof tianliGPT_postSelector>"u"||e===i)return;new MutationObserver(n=>{for(let s of n)if(s.type==="childList"){let o=document.querySelector(".tianliGPT-explanation"),d;if(o&&(d=o.querySelector(".blinking-cursor"),d&&o.classList.add("fi-at-ignore")),!o||d)return;o.classList.remove("fi-at-ignore")}}).observe(document.getElementById("content"),{childList:!0,subtree:!0})}translateText({texts:e,from:i,to:t}){return new Promise(n=>{a.request.translateText({from:i,to:t,texts:e},s=>{if(s.result===1){n(s.text[0]);return}console.error("Translate text error:",s.info),n(s.info)})})}async getBrowserLanguage(){let e=a.util.browserDefaultLanguage(),i=!0;return e?i=!1:a.request.post(a.request.api.ip,{},t=>{if(i=!1,t.result!==0){e=t.language;return}console.log("Can not get the language by ip",t.info)}),new Promise(t=>{let n=setInterval(()=>{i||(clearInterval(n),t(e))},100)})}addLangItem(e){if(!e)return!1;let i=this.getLangNameById(e),t=this.getLangCodeById(e);if(i&&!this.hugoLangCodes.includes(t)&&this.languages.length&&!this.languages.includes(e)){this.languages.push(e);let n=document.createElement("li");return n.classList.add("menu-item"),n.dataset.type="machine",n.innerHTML=`<a data-lang="${e}" class="menu-link" title="${i}"><i class="fa-solid fa-robot fa-fw fa-sm" aria-hidden="true"></i> ${i}</a>`,this.dom.localItems=this.dom.localItems?[...this.dom.localItems,n]:[n],!0}return!1}autoSelectLocalLanguage(){if(this.addLangItem(this.lang.query||this.lang.current),!this.detectLocalLanguage)return;let e=localStorage.getItem("AutoTranslate_detected");if(this.addLangItem(this.lang.browser)){e!=="true"&&!this.lang.query&&(a.language.setDefaultTo(this.lang.browser),localStorage.setItem("AutoTranslate_detected","true"));return}if(e!=="true"&&!this.lang.query){let i=this.getLangCodeById(this.lang.browser);this.hugoLangCodes.includes(i)&&!window.location.pathname.includes(this.hugoLangMap[i])&&window.location.assign(this.hugoLangMap[i]),localStorage.setItem("AutoTranslate_detected","true")}}clearCache(){localStorage.removeItem("AutoTranslate_detected"),a.language.clearCacheLanguage()}init(){this.getBrowserLanguage().then(e=>{e||(this.detectLocalLanguage=!1),this.lang.browser=e,this.autoSelectLocalLanguage(),this.setup(),this.handle(),this.execute(),this.translateAISummary()})}};l.autoTranslate=new c;document.readyState!=="loading"?l.autoTranslate.init():document.addEventListener("DOMContentLoaded",()=>l.autoTranslate.init(),!1);})();
