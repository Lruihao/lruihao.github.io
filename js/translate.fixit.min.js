(()=>{var d=!0,l=!0,c=[],o=[],g=[],h=["Lruihao"],m=["chinese_simplified","chinese_traditional"],u="translate.service",v=[{id:"corsican",name:"hinaassicurasol",serviceId:"co"},{id:"guarani",name:"ondoho",serviceId:"gn"},{id:"kinyarwanda",name:"Kinyarwanda",serviceId:"rw"},{id:"hausa",name:"dictionary variant",serviceId:"ha"},{id:"norwegian",name:"Norge",serviceId:"no"},{id:"dutch",name:"nederlands",serviceId:"nl"},{id:"yoruba",name:"Yoruba",serviceId:"yo"},{id:"english",name:"English",serviceId:"en"},{id:"gongen",name:"\u0917\u094B\u0902\u0917\u0947\u0928 \u0939\u0947\u0902 \u0928\u093E\u0902\u0935",serviceId:"gom"},{id:"latin",name:"Latina",serviceId:"la"},{id:"nepali",name:"\u0928\u0947\u092A\u093E\u0932\u0940Name",serviceId:"ne"},{id:"french",name:"Fran\xE7ais",serviceId:"fr"},{id:"czech",name:"\u010Desk\xFD",serviceId:"cs"},{id:"hawaiian",name:"paneke\u02BBhaka",serviceId:"haw"},{id:"georgian",name:"\u10EF\u10DD\u10E0\u10EF\u10D8\u10D0\u10DC\u10D8Name",serviceId:"ka"},{id:"russian",name:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A",serviceId:"ru"},{id:"chinese_simplified",name:"\u7B80\u4F53\u4E2D\u6587",serviceId:"zh-CN"},{id:"persian",name:"Persian",serviceId:"fa"},{id:"bhojpuri",name:"\u0939\u092E\u093E\u0930 \u0915\u092A\u093E\u0930 \u0926\u0930\u094D\u0926 \u0915\u0930\u0924\u093E\u0964",serviceId:"bho"},{id:"hindi",name:"\u0939\u093F\u0928\u094D\u0926\u0940",serviceId:"hi"},{id:"belarusian",name:"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044FName",serviceId:"be"},{id:"swahili",name:"Kiswahili",serviceId:"sw"},{id:"icelandic",name:"\xCDslandName",serviceId:"is"},{id:"yiddish",name:"\u05D9\u05D9\u05B7\u05D3\u05D9\u05E9",serviceId:"yi"},{id:"twi",name:"Ma fr\u025B",serviceId:"ak"},{id:"irish",name:"\xCDris",serviceId:"ga"},{id:"gujarati",name:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",serviceId:"gu"},{id:"khmer",name:"\u1781\u17D2\u1798\u17C2\u179AKCharselect unicode block name",serviceId:"km"},{id:"slovak",name:"Slovensk\xE1",serviceId:"sk"},{id:"hebrew",name:"\u05D4\u05D9\u05D1\u05E8\u05D9\u05EA",serviceId:"iw"},{id:"kannada",name:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1\u0CCDName",serviceId:"kn"},{id:"hungarian",name:"magyar",serviceId:"hu"},{id:"tamil",name:"\u0BA4\u0BBE\u0BAE\u0BBF\u0BB2\u0BCD",serviceId:"ta"},{id:"arabic",name:"\u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",serviceId:"ar"},{id:"bengali",name:"\u09AC\u09C7\u0999\u09CD\u0997\u09BE\u09B2\u09C0",serviceId:"bn"},{id:"azerbaijani",name:"azerbaijani",serviceId:"az"},{id:"samoan",name:"lifiava",serviceId:"sm"},{id:"afrikaans",name:"afrikaans",serviceId:"af"},{id:"indonesian",name:"IndonesiaName",serviceId:"id"},{id:"danish",name:"dansk",serviceId:"da"},{id:"shona",name:"Shona",serviceId:"sn"},{id:"bambara",name:"Bamanankan",serviceId:"bm"},{id:"lithuanian",name:"Lietuva",serviceId:"lt"},{id:"vietnamese",name:"Ti\u1EBFng Vi\u1EC7t",serviceId:"vi"},{id:"maltese",name:"Malti",serviceId:"mt"},{id:"turkmen",name:"T\xFCrkmen\xE7e",serviceId:"tk"},{id:"assamese",name:"assamese",serviceId:"as"},{id:"catalan",name:"catal\xE0",serviceId:"ca"},{id:"singapore",name:"\u0DC3\u0DD2\u0D82\u0D9C\u0DCF\u0DB4\u0DD4\u0DBB\u0DCA",serviceId:"si"},{id:"cebuano",name:"cebuano",serviceId:"ceb"},{id:"sanskrit",name:"Sanskrit",serviceId:"sa"},{id:"polish",name:"Polski",serviceId:"pl"},{id:"galician",name:"galico",serviceId:"gl"},{id:"latvian",name:"latvie\u0161u",serviceId:"lv"},{id:"ukrainian",name:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430Name",serviceId:"uk"},{id:"tatar",name:"\u0422\u0430\u0442\u0430\u0440",serviceId:"tt"},{id:"scottish_gaelic",name:"G\xE0idhlig na h-Alba",serviceId:"gd"},{id:"welsh",name:"color name",serviceId:"cy"},{id:"japanese",name:"\u65E5\u672C\u8A9E",serviceId:"ja"},{id:"filipino",name:"Pilipino",serviceId:"tl"},{id:"aymara",name:"aymara.",serviceId:"ay"},{id:"lao",name:"\u0E81\u0EB0\u0EA3\u0EB8\u0E99\u0EB2",serviceId:"lo"},{id:"telugu",name:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41QFontDatabase",serviceId:"te"},{id:"romanian",name:"Rom\xE2n\u0103",serviceId:"ro"},{id:"haitian_creole",name:"Krey\xF2l ayisyen",serviceId:"ht"},{id:"dogrid",name:"\u0915\u0941\u0915\u0941\u0930\u092E\u0941\u0924\u094D\u0924\u093E",serviceId:"doi"},{id:"swedish",name:"Svenska",serviceId:"sv"},{id:"maithili",name:"\u092E\u0930\u093E\u0924\u093F\u0932\u0940Name",serviceId:"mai"},{id:"thai",name:"\u0E04\u0E19\u0E44\u0E17\u0E22",serviceId:"th"},{id:"armenian",name:"\u0531\u0580\u0574\u0565\u0576\u0575\u0561\u0576",serviceId:"hy"},{id:"burmese",name:"\u1017\u102C\u101B\u1019\u103A",serviceId:"my"},{id:"pashto",name:"\u067E\u069A\u062A\u0648Name",serviceId:"ps"},{id:"hmong",name:"hmong",serviceId:"hmn"},{id:"dhivehi",name:"\u078B\u07A8\u0788\u07A7\u0783\u07A9\u0788\u07B0",serviceId:"dv"},{id:"chinese_traditional",name:"\u7E41\u9AD4\u4E2D\u6587",serviceId:"zh-TW"},{id:"luxembourgish",name:"L\xEBtzebuergeschName",serviceId:"lb"},{id:"sindhi",name:"\u0633\u0646\u068C\u064A",serviceId:"sd"},{id:"kurdish",name:"Kurd\xEE",serviceId:"ku"},{id:"turkish",name:"T\xFCrk\xE7e",serviceId:"tr"},{id:"macedonian",name:"\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438",serviceId:"mk"},{id:"bulgarian",name:"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",serviceId:"bg"},{id:"malay",name:"Malay",serviceId:"ms"},{id:"luganda",name:"luganda",serviceId:"lg"},{id:"marathi",name:"\u092E\u0930\u093E\u0920\u0940Name",serviceId:"mr"},{id:"estonian",name:"eesti keel",serviceId:"et"},{id:"malayalam",name:"\u0D2E\u0D32\u0D2E\u0D3E\u0D32\u0D02",serviceId:"ml"},{id:"deutsch",name:"Deutsch",serviceId:"de"},{id:"slovene",name:"sloven\u0161\u010Dina",serviceId:"sl"},{id:"urdu",name:"\u0627\u0648\u0631\u062F\u0648",serviceId:"ur"},{id:"portuguese",name:"portugu\xEAs",serviceId:"pt"},{id:"igbo",name:"igbo",serviceId:"ig"},{id:"kurdish_sorani",name:"\u06A9\u0648\u0631\u062F\u06CC \u0633\u06C6\u0631\u0627\u0646\u06CC",serviceId:"ckb"},{id:"oromo",name:"adeta",serviceId:"om"},{id:"greek",name:"\u03B5\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",serviceId:"el"},{id:"spanish",name:"Espa\xF1ol",serviceId:"es"},{id:"frisian",name:"frysk",serviceId:"fy"},{id:"somali",name:"Soomaali",serviceId:"so"},{id:"amharic",name:"amharic",serviceId:"am"},{id:"nyanja",name:"potakuyan",serviceId:"ny"},{id:"punjabi",name:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40Name",serviceId:"pa"},{id:"basque",name:"baskoa",serviceId:"eu"},{id:"italian",name:"italiano",serviceId:"it"},{id:"albanian",name:"albanian",serviceId:"sq"},{id:"korean",name:"\uD55C\uAD6D\uC5B4",serviceId:"ko"},{id:"tajik",name:"\u0422\u0430jik\u04E3Name",serviceId:"tg"},{id:"finnish",name:"suomi",serviceId:"fi"},{id:"kyrgyz",name:"\u041A\u044B\u0440\u0433\u044B\u0437 \u0442\u0438\u043B\u0438",serviceId:"ky"},{id:"ewe",name:"E\u028Begbe",serviceId:"ee"},{id:"croatian",name:"hrvatski",serviceId:"hr"},{id:"creole",name:"a n:n",serviceId:"kri"},{id:"quechua",name:"Quechua",serviceId:"qu"},{id:"bosnian",name:"bosnian",serviceId:"bs"},{id:"maori",name:"Maori",serviceId:"mi"}];var I=["header-title","language-switch","post-author","powered","author","typeit","katex","katex-display"],f=["repo-url","netease-music","comment-163"],b=["Hugo","FixIt","Lruihao","CC BY-NC-SA","RSS"],r=class{constructor(){this.service=u,this.languages=m,this.ignoreClass=[...I,...f,...c],this.ignoreID=o,this.ignoreTag=g,this.ignoreText=[...b,...h],this.detectLocalLanguage=d,this.enterprise=l,this.isMobile=fixit.util.isMobile(),this.afterExecuteEvents=new Set,this.lang={...this.getTypesLang()},this.supportLanguages={"client.edge":translate.service.edge.language.json,"translate.service":v},this.hugoLangCodes=window.ATConfig.hugoLangCodes,this.hugoLangMap=window.ATConfig.hugoLangMap,this.dom={}}getLangNameById(e){return this.supportLanguages[this.service]?.find(a=>a.id===e)?.name}getLangCodeById(e){return Object.keys(translate.util.browserLanguage).find(a=>translate.util.browserLanguage[a]===e)}getLangIdByCode(e){return translate.util.browserLanguage[e]}getTypesLang(){return{current:translate.language.getCurrent(),local:window.ATConfig.local||translate.language.getLocal(),query:window.location.search.split("lang=")[1],browser:this.lang?.browser||""}}toggleVisibility(e,a){e.classList.toggle("d-none",!a),e.setAttribute("aria-hidden",!a)}toggleMenuActive(e){Array.from(this.dom.switchMenu.childNodes).filter(a=>a.classList.contains("active")).forEach(a=>{a.classList.remove("active")}),e.classList.add("active")}handleDesktop(){if(this.dom.switchDesktop=document.querySelector("#header-desktop .language-switch.auto"),!this.dom.switchDesktop)return;this.dom.switchMenu=this.dom.switchDesktop.querySelector(".sub-menu"),this.dom.localItem&&this.dom.switchMenu.insertBefore(this.dom.localItem,this.dom.switchMenu.querySelector(".menu-item-divider").nextSibling),this.#e(),this.#a();let e=this.dom.switchDesktop.previousElementSibling;e.classList.contains("language-switch")&&this.toggleVisibility(e,!1),this.toggleVisibility(this.dom.switchDesktop,!0),this.afterExecuteEvents.add(()=>{this.lang={...this.getTypesLang()};let{current:a,local:i,query:t}=this.getTypesLang();this.lang={...this.lang,current:a,query:t},(a!==i||t)&&this.toggleMenuActive(document.querySelector(`.menu-link[data-lang="${a}"]`).parentElement)})}#e(){let e=Array.from(this.dom.switchMenu.childNodes).filter(a=>a.dataset.type==="artificial");fixit.util.forEach(e,a=>{if(a.classList.contains("active")&&!a.children[0].getAttribute("title")){let i=this.getLangNameById(this.lang.local);a.children[0].setAttribute("title",i),a.children[0].insertAdjacentText("beforeend",i)}a.addEventListener("click",i=>{translate.language.clearCacheLanguage()})})}#a(){let e=Array.from(this.dom.switchMenu.childNodes).filter(a=>a.dataset.type==="machine");fixit.util.forEach(e,a=>{let i=a.children[0].dataset.lang,t=this.getLangNameById(i),s=this.getLangCodeById(i);if(this.service==="client.edge"&&!t){this.toggleVisibility(a,!1);return}if(this.hugoLangCodes.includes(s)||i==this.lang.local){this.toggleVisibility(a,!1);return}a.addEventListener("click",y=>{window.history.pushState({},"",`?lang=${i}`),this.toggleMenuActive(a),translate.changeLanguage(i)})})}handleMobile(){this.dom.switchMobile=document.querySelector("#header-mobile .language-switch.auto"),this.dom.switchMobile&&(this.#i(),this.afterExecuteEvents.add(()=>{this.dom.selectEl=this.dom.switchMobile.querySelector("select"),this.dom.selectEl.classList.add("language-select"),this.#t(),this.#s();let{current:e,local:a,query:i}=this.getTypesLang();this.lang={...this.lang,current:e,query:i},(e!==a||i)&&(this.dom.selectEl.value=e),this.toggleVisibility(this.dom.switchMobile,!0)}))}#i(){translate.selectLanguageTag.selectOnChange=e=>{let a=e.target.value;e.target.options[e.target.selectedIndex].dataset.type==="artificial"?(translate.language.clearCacheLanguage(),window.location=a):(window.history.pushState({},"",`?lang=${a}`),translate.changeLanguage(a))}}#t(){fixit.util.forEach(this.dom.selectEl.querySelectorAll("option"),e=>{e.dataset.type="machine",e.innerText=`\u{1F916} ${e.innerText}`;let a=this.getLangCodeById(e.value);(this.hugoLangCodes.includes(a)||e.value==this.lang.local)&&e.parentElement.removeChild(e)})}#s(){let e=this.dom.switchMobile.previousElementSibling;if(this.hugoLangCodes.length>1){fixit.util.forEach(e.querySelectorAll("option"),s=>{if(!s.getAttribute("value"))return s.parentElement.removeChild(s);s.dataset.type="artificial",s.innerText=`\u{1F464} ${s.innerText}`,s.disabled&&s.removeAttribute("disabled")}),this.dom.selectEl.prepend(...e.querySelectorAll("option:not([selected])")),this.dom.selectEl.prepend(e.querySelector("option[selected]")),this.toggleVisibility(e,!1);return}let a=this.dom.switchMobile.querySelector('[role="button"]'),i=this.getLangNameById(this.lang.local);a.dataset.current||(a.dataset.current=i,a.insertAdjacentText("afterbegin",i));let t=document.createElement("option");t.selected=!0,t.dataset.type="artificial",t.value=window.location.pathname,t.innerText=`\u{1F464} ${i}`,this.dom.selectEl.prepend(t),this.toggleVisibility(e,!1)}handle(){return this.isMobile?this.handleMobile():this.handleDesktop(),this}setup(){return this.enterprise?translate.enterprise.use():translate.service.use(this.service),translate.ignore.id.push(...this.ignoreID),translate.ignore.class.push(...this.ignoreClass),translate.ignore.tag.push(...this.ignoreTag),translate.ignore.text.push(...this.ignoreText),translate.language.setLocal(this.lang.local),translate.language.setUrlParamControl("lang"),translate.listener.start(),translate.selectLanguageTag.show=this.isMobile,translate.selectLanguageTag.languages=this.languages.join(","),this}execute(){translate.execute(),this.afterExecuteEvents.forEach(e=>{e()})}async getBrowserLanguage(){let e=translate.util.browserDefaultLanguage(),a=!0;return e?a=!1:translate.request.post(translate.request.api.ip,{},i=>{if(a=!1,i.result!==0){e=i.language;return}console.log("Can not get the language by ip",i.info)}),new Promise(i=>{let t=setInterval(()=>{a||(clearInterval(t),i(e))},100)})}autoSelectLocalLanguage(){if(!this.detectLocalLanguage)return;let e=this.getLangNameById(this.lang.browser),a=this.getLangCodeById(this.lang.browser),i=localStorage.getItem("AutoTranslate_detected");if(e&&!this.hugoLangCodes.includes(a)&&this.languages.length&&!this.languages.includes(this.lang.browser)){this.languages.push(this.lang.browser),this.dom.localItem=document.createElement("li"),this.dom.localItem.classList.add("menu-item"),this.dom.localItem.dataset.type="machine",this.dom.localItem.innerHTML=`<a data-lang="${this.lang.browser}" class="menu-link" title="${e}"><i class="fa-solid fa-robot fa-fw fa-sm" aria-hidden="true"></i> ${e}</a>`,i!=="true"&&(translate.language.setDefaultTo(this.lang.browser),localStorage.setItem("AutoTranslate_detected",!0));return}i!=="true"&&this.hugoLangCodes.includes(a)&&!window.location.pathname.includes(this.hugoLangMap[a])&&(window.location=this.hugoLangMap[a]),i!=="true"&&localStorage.setItem("AutoTranslate_detected",!0)}clearCache(){localStorage.removeItem("AutoTranslate_detected"),translate.language.clearCacheLanguage()}init(){this.getBrowserLanguage().then(e=>{e||(this.detectLocalLanguage=!1),this.lang.browser=e,this.autoSelectLocalLanguage(),this.setup(),this.handle(),this.execute()})}};fixit.autoTranslate=new r;document.readyState!=="loading"?fixit.autoTranslate.init():document.addEventListener("DOMContentLoaded",()=>fixit.autoTranslate.init(),!1);})();
