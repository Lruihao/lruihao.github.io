"use strict";(()=>{var L=class{forEach(e,t){e=e||[];let i=[];for(let s=0;s<e.length;s++){let n=t(e[s],s);n instanceof Promise&&i.push(n)}return Promise.all(i)}getScrollTop(){return(document.documentElement??document.body).scrollTop}isMobile(){return window.matchMedia("only screen and (max-width: 680px)").matches}isTocStatic(){return document.getElementById("toc-static").dataset.kept==="true"||window.matchMedia("only screen and (max-width: 960px)").matches}animateCSS(e,t,i,s){!Array.isArray(t)&&(t=[t]),e.classList.add("animate__animated",...t),e.addEventListener("animationend",()=>{!i&&e.classList.remove("animate__animated",...t),typeof s=="function"&&s()},{once:!0})}isValidDate(e){return e instanceof Date&&!isNaN(e.getTime())}scrollIntoView(e){(e.startsWith("#")?document.getElementById(e.slice(1)):document.querySelector(e))?.scrollIntoView({behavior:"smooth"})}getStagingDOM(){let e=document.createElement("div");return e.style.display="none",e.dataset.stagingId=Math.random().toString(36).slice(2),document.body.appendChild(e),{$el:e,stage(t){e.innerHTML="",e.appendChild(t)},contentAsHtml(){return e.innerHTML},contentAsText(){return e.innerText},contentAsJson(){return JSON.parse(e.innerHTML)},destroy(){document.body.removeChild(e)}}}copyText(e){return navigator.clipboard?(this.copyText=t=>navigator.clipboard.writeText(t),this.copyText(e)):(this.copyText=t=>new Promise((i,s)=>{let n=document.createElement("input");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy")?(document.body.removeChild(n),i()):s()}),this.copyText(e))}isObjectLiteral(e){return typeof e!="string"?!1:(e=e.replace(/\s+/g," ").trim().replace(/;$/,""),!!(e.startsWith("{")&&e.endsWith("}")))}HTMLEscape(e){return e.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}};var _=class{init(e=document){e.querySelectorAll(".file-tree-toggle:not([data-init])").forEach(t=>{t.addEventListener("click",i=>{i.stopPropagation();let s=t.closest(".file-tree-folder"),n=s.classList.contains("is-collapsed");s&&s.classList.toggle("is-collapsed",!n);let o=t.closest(".file-tree-wrapper");this.updateLineHeight(o)}),t.dataset.init="true"}),this.updateLineHeight(e)}updateLineHeight(e=document){e.querySelectorAll(".file-tree .file-tree").forEach(i=>{if(i.closest(".file-tree-item.is-collapsed")){i.style.removeProperty("--fi-file-tree-line-height");return}let n=Array.from(i.children).filter(m=>m.classList?.contains("file-tree-item"));if(!n.length){i.style.removeProperty("--fi-file-tree-line-height");return}let o=n[0].querySelector(".file-tree-label"),r=n[n.length-1].querySelector(".file-tree-label");if(!o||!r)return;let a=o.getBoundingClientRect(),h=r.getBoundingClientRect(),c=a.top+a.height/2,y=h.top+h.height/2,p=a.height/2+1/2+4,l=Math.max(0,y-c+p);i.style.setProperty("--fi-file-tree-line-height",`${l}px`)})}};var O=class{constructor(){this.config=window.config,this.isDark=document.documentElement.dataset.theme==="dark",this.util=new L,this.fileTree=new _,this.newScrollTop=this.util.getScrollTop(),this.oldScrollTop=this.newScrollTop,this.scrollEventSet=new Set,this.resizeEventSet=new Set,this.switchThemeEventSet=new Set,this.clickMaskEventSet=new Set,this.beforeprintEventSet=new Set,this.disableScrollEvent=!1,window.objectFitImages&&objectFitImages()}initThemeColor(){let e=document.querySelector('[name="theme-color"]');e&&(this._themeColorOnSwitchTheme=this._themeColorOnSwitchTheme||(()=>{e.content=this.isDark?e.dataset.dark:e.dataset.light}),this.switchThemeEventSet.add(this._themeColorOnSwitchTheme),this._themeColorOnSwitchTheme())}initSVGIcon(){this.util.forEach(document.querySelectorAll("[data-svg-src]"),e=>{fetch(e.dataset.svgSrc).then(t=>t.text()).then(t=>{let i=document.createElement("div");i.insertAdjacentHTML("afterbegin",t);let s=i.firstChild;s.dataset.svgSrc=e.dataset.svgSrc,s.classList.add("icon");let n=s.getElementsByTagName("title");n.length&&s.removeChild(n[0]),e.parentElement.replaceChild(s,e)}).catch(t=>{console.error(t)})})}initTwemoji(e=document){this.config.twemoji&&twemoji.parse(e)}initMenu(){this.initMenuDesktop(),this.initMenuMobile()}initMenuDesktop(){this.util.forEach(document.querySelectorAll(".has-children"),e=>{e.querySelector(".sub-menu").style.minWidth=`${e.offsetWidth-8}px`})}initMenuMobile(){let e=document.getElementById("menu-toggle-mobile"),t=document.getElementById("menu-mobile");e.addEventListener("click",i=>{document.body.classList.toggle("blur"),e.classList.toggle("active"),t.classList.toggle("active"),this.disableScrollEvent=document.body.classList.contains("blur")},!1),this._menuMobileOnClickMask=this._menuMobileOnClickMask||(()=>{e.classList.remove("active"),t.classList.remove("active")}),this.clickMaskEventSet.add(this._menuMobileOnClickMask),this.util.forEach(document.querySelectorAll(".menu-item>.nested-item"),i=>{i.addEventListener("click",function(){this.parentNode.querySelector(".sub-menu").classList.toggle("open"),this.querySelector(".dropdown-icon").classList.toggle("open")})})}initSwitchTheme(){this.util.forEach(document.getElementsByClassName("theme-switch"),e=>{e.addEventListener("click",()=>{document.documentElement.dataset.theme=this.isDark?"light":"dark",document.documentElement.style.setProperty("color-scheme",this.isDark?"light":"dark"),this.isDark=!this.isDark,window.localStorage?.setItem("theme",this.isDark?"dark":"light");for(let t of this.switchThemeEventSet)t(this.isDark)},!1)})}_applyHighlightToText(e,t,i){let s=0;for(let n=0;n<t.length;n++){let o=e.substring(t[n][0]+s,t[n][1]+1+s),r=`<${i}>`+o+`</${i}>`;e=e.substring(0,t[n][0]+s)+r+e.substring(t[n][1]+1+s,e.length),s+=i.length*2+5}return e}_resetSearchUI(e,t,i,s){e.classList.remove("open"),t.style.display="none",i.style.display="none",s&&s.autocomplete.setVal("")}initSearch(){let e=this.config.search,t=this.util.isMobile();if(!e||t&&this._searchMobileOnce||!t&&this._searchDesktopOnce)return;let i=e.maxResultLength??10,s=e.snippetLength??50,n=e.highlightTag??"em",o=e.isCaseSensitive??!1,r=e.minMatchCharLength??1,a=e.findAllMatches??!1,h=e.location??0,c=e.threshold??.3,y=e.distance??100,p=e.ignoreLocation??!1,l=e.useExtendedSearch??!1,m=e.ignoreFieldNorm??!1,S=t?"mobile":"desktop",v=document.getElementById(`header-${S}`),T=document.getElementById(`search-input-${S}`),x=document.getElementById(`search-toggle-${S}`),k=document.getElementById(`search-loading-${S}`),w=document.getElementById(`search-clear-${S}`),H=document.getElementById("search-cancel-mobile");if(e.type==="post-chat"&&window.postChatUser){t?T.addEventListener("focus",()=>{window.postChatUser.setSearchInput("")},!1):x.addEventListener("click",()=>{window.postChatUser.setSearchInput("")},!1);return}t?(this._searchMobileOnce=!0,T.addEventListener("focus",()=>{this.disableScrollEvent=!0,document.body.classList.add("blur"),v.classList.add("open")},!1),H.addEventListener("click",()=>{this.disableScrollEvent=!1,document.body.classList.remove("blur"),document.getElementById("menu-toggle-mobile").classList.remove("active"),document.getElementById("menu-mobile").classList.remove("active"),this._resetSearchUI(v,k,w,this._searchMobile)},!1),w.addEventListener("click",()=>{w.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")},!1),this._searchMobileOnClickMask=this._searchMobileOnClickMask||(()=>{this._resetSearchUI(v,k,w,this._searchMobile)}),this.clickMaskEventSet.add(this._searchMobileOnClickMask)):(this._searchDesktopOnce=!0,x.addEventListener("click",()=>{document.body.classList.add("blur"),v.classList.add("open"),T.focus(),this.disableScrollEvent=!0},!1),w.addEventListener("click",()=>{this.disableScrollEvent=!1,w.style.display="none",this._searchDesktop&&this._searchDesktop.autocomplete.setVal("")},!1),this._searchDesktopOnClickMask=this._searchDesktopOnClickMask||(()=>{this._resetSearchUI(v,k,w,this._searchDesktop)}),this.clickMaskEventSet.add(this._searchDesktopOnClickMask)),T.addEventListener("input",()=>{T.value===""?w.style.display="none":w.style.display="inline"},!1),(()=>{let M=autocomplete(`#search-input-${S}`,{hint:!1,autoselect:!0,dropdownMenuContainer:`#search-dropdown-${S}`,clearOnSelected:!0,cssClasses:{noPrefix:!0},debug:!0},{name:"search",source:(g,E)=>{k.style.display="inline",w.style.display="none";let u=d=>{k.style.display="none",w.style.display="inline",E(d)};if(e.type==="algolia")this._algoliaIndex=this._algoliaIndex||algoliasearch(e.algoliaAppID,e.algoliaSearchKey).initIndex(e.algoliaIndex),this._algoliaIndex.search(g,{offset:0,length:i*8,attributesToHighlight:["title"],attributesToRetrieve:["*"],attributesToSnippet:[`content:${s}`],highlightPreTag:`<${n}>`,highlightPostTag:`</${n}>`}).then(({hits:d})=>{let f={};d.forEach(({uri:b,date:q,_highlightResult:{title:A},_snippetResult:{content:C}})=>{f[b]&&f[b].context.length>C.value||(f[b]={uri:b,title:A.value,date:q,context:C.value})}),u(Object.values(f).slice(0,i))}).catch(d=>{console.error(d),u([])});else if(e.type==="fuse"){let d=()=>{let f={};return window._index.search(g).forEach(({item:b,refIndex:q,matches:A})=>{let C=b.title,I=b.content;A.forEach(({indices:$,value:R,key:B})=>{B==="content"?I=this._applyHighlightToText(I,$,n):B==="title"&&(C=this._applyHighlightToText(C,$,n))}),f[b.uri]={uri:b.uri,title:C,date:b.date,context:I}}),Object.values(f).slice(0,i)};window._index?u(d()):fetch(e.fuseIndexURL).then(f=>f.json()).then(f=>{let b={isCaseSensitive:o,findAllMatches:a,minMatchCharLength:r,location:h,threshold:c,distance:y,ignoreLocation:p,useExtendedSearch:l,ignoreFieldNorm:m,includeScore:!1,shouldSort:!0,includeMatches:!0,keys:["content","title"]};window._index=new Fuse(f,b),u(d())}).catch(f=>{console.error(f),u([])})}else if(e.type==="cse"){let d=this.config.cse;d.engine==="google"&&d.cx&&u([{uri:`${d.resultsPage}#gsc.tab=0&gsc.q=${encodeURIComponent(g)}`,title:d.searchIn,date:'<i class="fa-brands fa-searchengin fa-xl" aria-hidden="true"></i>',context:d.gotoResultsPage}])}else u([])},templates:{suggestion:({title:g,uri:E,date:u,context:d})=>`<div><a href="${E}"><span class="suggestion-title">${g}</span></a><span class="suggestion-date">${u}</span></div><div class="suggestion-context">${d}</div>`,empty:({query:g})=>`<div class="search-empty">${e.noResultsFound}: <span class="search-query">"${this.util.HTMLEscape(g)}"</span></div>`,footer:({})=>{let g,E,u;switch(e.type){case"algolia":g="algolia",E='<i class="fa-brands fa-algolia" aria-hidden="true"></i>',u="https://www.algolia.com/";break;case"fuse":g="Fuse.js",E="",u="https://fusejs.io/";break;case"cse":this.config.cse.engine==="google"&&(g="Google CSE",E='<i class="fa-brands fa-google" aria-hidden="true"></i>',u="https://programmablesearchengine.google.com/");break;default:g="",E="",u=""}return`<div class="search-footer">Search by <a href="${u}" rel="noopener noreferrer" target="_blank">${E} ${g}</a></div>`}}});M.on("autocomplete:selected",(g,E,u,d)=>{document.getElementById("mask")?.click(),window.location.assign(E.uri)}),t?this._searchMobile=M:this._searchDesktop=M})()}initBreadcrumb(){let e=document.querySelector(".breadcrumb-container.sticky");this.breadcrumbHeight=e?.clientHeight??0,this.breadcrumbHeight&&document.querySelector("main.fi-container")?.style.setProperty("--fi-breadcrumb-height",`${this.breadcrumbHeight}px`)}initDetails(e=document){this.util.forEach(e.querySelectorAll(".details:not(.disabled)"),t=>{t.querySelector(".details-summary").addEventListener("click",()=>{t.classList.toggle("open")},!1)})}initLightGallery(){this.config.lightgallery&&(this.lg&&this.lg.destroy(!0),this.lg=lightGallery(document.getElementById("content"),{plugins:[lgThumbnail,lgZoom],selector:".lightgallery",speed:400,hideBarsDelay:2e3,allowMediaOverlap:!0,exThumbImage:"data-thumbnail",toggleThumb:!0,thumbWidth:80,thumbHeight:"60px",actualSize:!1,showZoomInOutIcons:!0,licenseKey:"none"}))}initCopyCode(e,t){let i=e.dataset.mode==="classic"?e.querySelector(".code-header .copy-btn"):e.querySelector(".code-copy-btn");e.dataset.copyable!=="true"||!i||i.addEventListener("click",()=>{let s=e.classList.contains("line-wrapping"),n=e.querySelectorAll(".hl");s&&e.classList.toggle("line-wrapping"),this.util.forEach(n,o=>o.classList.toggle("hl")),this.util.copyText(t.innerText.trim()).then(()=>{this.util.animateCSS(t,"animate__flash"),s&&e.classList.toggle("line-wrapping"),this.util.forEach(n,o=>o.classList.toggle("hl")),i.toggleAttribute("data-copied",!0),setTimeout(()=>{i.toggleAttribute("data-copied",!1)},2e3)},()=>{console.error("Clipboard write failed!","Your browser does not support clipboard API!")})},!1)}initCodeExpandBtn(e){e.querySelector(".code-expand-btn")?.addEventListener("click",()=>{e.classList.toggle("is-expanded")},!1)}initCodeWrapper(){let e=document.querySelectorAll(".code-block.highlight:not([data-init])");this.util.forEach(e,t=>{let i=t.querySelectorAll("pre.chroma");if(!i.length)return;let s=i[i.length-1];if(t.dataset.init="true",this.initCopyCode(t,s),this.initCodeExpandBtn(t),t.dataset.mode==="classic"){let n=t.querySelector(".code-header");if(!n)return;n.querySelector(".code-title").addEventListener("click",()=>{t.classList.toggle("is-collapsed")},!1),n.querySelector(".ellipses-btn").addEventListener("click",()=>{t.classList.remove("is-collapsed")},!1),n.querySelector(".line-nos-btn")?.addEventListener("click",()=>{t.classList.toggle("line-nos-hidden")},!1),n.querySelector(".line-wrap-btn")?.addEventListener("click",()=>{t.classList.toggle("line-wrapping")},!1),t.dataset.editable==="true"&&n.querySelector(".edit-btn")?.addEventListener("click",()=>{s.getAttribute("contenteditable")==="true"?(s.setAttribute("contenteditable",!1),s.blur()):(this.util.forEach(t.querySelectorAll(".hl"),r=>{r.classList.remove("hl")}),t.classList.add("is-expanded"),s.setAttribute("contenteditable",!0),s.focus())},!1)}})}initDiagramCopyBtn(){let e=this.util.getStagingDOM();this.util.forEach(document.querySelectorAll(".diagram-copy-btn"),t=>{t.addEventListener("click",()=>{e.stage(t.parentElement.querySelector("template").content.cloneNode(!0));let i=e.contentAsText();try{i=JSON.stringify(JSON.parse(i),null,2)}catch{}this.util.copyText(i).then(()=>{t.toggleAttribute("data-copied",!0),setTimeout(()=>{t.toggleAttribute("data-copied",!1)},2e3)},()=>{console.error("Clipboard write failed!","Your browser does not support clipboard API!")})},!1)}),e.destroy()}_updateTocActiveState(e,t,i){let s=e.querySelectorAll("a:first-child"),n=e.getElementsByTagName("li");this.util.forEach(s,r=>{r.classList.remove("active")}),this.util.forEach(n,r=>{r.classList.remove("has-active")});let o=t.length-1;for(let r=0;r<t.length-1;r++){let a=t[r].getBoundingClientRect().top,h=t[r+1].getBoundingClientRect().top;if(r==0&&a>i||a<=i&&h>i){o=r;break}}if(o!==-1&&s[o]){s[o].classList.add("active");let r=s[o].parentElement;for(;r!==e;)r.classList.add("has-active"),r=r.parentElement.parentElement}}initToc(){let e=document.getElementById("TableOfContents");if(e===null)return;let t=document.getElementsByClassName("heading-element"),i=20+this.breadcrumbHeight+(document.body.dataset.headerDesktop!=="normal"?document.getElementById("header-desktop").offsetHeight:0),s=document.querySelector("#toc-drawer-button");if(s&&s.classList.toggle("d-none",!this.util.isTocStatic()),this.util.isTocStatic()){let a=document.getElementById("toc-content-static");e.parentElement!==a&&(e.parentElement.removeChild(e),a.appendChild(e)),this._tocDialogOnScroll=this._tocDialogOnScroll||(()=>{this._updateTocActiveState(document.querySelector("#toc-content-drawer>nav"),t,i)}),this._tocDialogOnScroll(),this.scrollEventSet.add(this._tocDialogOnScroll),this._tocOnScroll&&this.scrollEventSet.delete(this._tocOnScroll);return}let n=document.getElementById("toc-content-auto");e.parentElement!==n&&(e.parentElement.removeChild(e),n.appendChild(e));let o=document.getElementById("toc-auto");o.style.visibility="visible",this.util.animateCSS(o,["animate__fadeIn","animate__faster"],!0);let r=document.querySelector(".post-meta");o.style.marginTop=`${r.offsetTop+r.clientHeight}px`,document.querySelector(".fi-container").addEventListener("resize",()=>{o.style.marginBottom=`${document.querySelector(".fi-container").clientHeight-document.querySelector(".post-footer").offsetTop}px`}),this._tocOnScroll=this._tocOnScroll||(()=>{o.style.marginBottom=`${document.querySelector(".fi-container").clientHeight-document.querySelector(".post-footer").offsetTop}px`,this._updateTocActiveState(e,t,i)}),this._tocOnScroll(),this.scrollEventSet.add(this._tocOnScroll),this._tocDialogOnScroll&&this.scrollEventSet.delete(this._tocDialogOnScroll)}initTocListener(){let e=document.getElementById("toc-auto"),t=document.getElementById("toc-content-auto");document.querySelector("#toc-auto>.toc-title")?.addEventListener("click",()=>{let i=["animate__faster"],s=e.classList.contains("toc-hidden");i.push(s?"animate__fadeIn":"animate__fadeOut"),s?t.classList.remove("d-none","animate__fadeOut"):t.classList.remove("animate__fadeIn"),this.util.animateCSS(t,i,!0,()=>{t.classList.contains("animate__fadeOut")&&t.classList.add("d-none")}),e.classList.toggle("toc-hidden")},!1)}initTocDialog(){let e=document.querySelector("#toc-dialog"),t=document.querySelector("#toc-drawer-button");!e||!t||(t.addEventListener("click",()=>{e.showModal(),document.activeElement?.blur()}),e.addEventListener("click",i=>{e.close()}))}fixTocScroll(){if(typeof APlayer=="function"){let e=document.getElementById("TableOfContents");if(e){let t=e.cloneNode(!0);e.parentElement.replaceChild(t,e),e=t}this.util.forEach(document.querySelectorAll(".heading-mark"),t=>{let i=t.cloneNode(!0);t.parentElement.replaceChild(i,t)})}}initEcharts(){this.config.echarts&&(echarts.registerTheme("light",this.config.echarts.lightTheme),echarts.registerTheme("dark",this.config.echarts.darkTheme),this._echartsOnSwitchTheme=this._echartsOnSwitchTheme||(()=>{this._echartsArr=this._echartsArr||[];for(let t=0;t<this._echartsArr.length;t++)this._echartsArr[t].dispose();this._echartsArr=[];let e=this.util.getStagingDOM();this.util.forEach(document.getElementsByClassName("echarts"),t=>{let i=t.nextElementSibling;if(i.tagName!=="TEMPLATE")return;let s=echarts.init(t,this.isDark?"dark":"light",{renderer:"svg"});s.showLoading(),e.stage(i.content.cloneNode(!0));let n=o=>{if(!o){s.hideLoading(),console.warn("ECharts option is missing or invalid. Chart disposed.",{element:t,option:i}),s.dispose(),t.removeAttribute("style");return}s.hideLoading(),s.setOption(o),this._echartsArr.push(s)};if(i.dataset.fmt==="js")try{let o=e.contentAsText(),r=new Function("fixit","chart",this.util.isObjectLiteral(o)?`return ${o}`:o);return i.dataset.async==="true"?Promise.resolve(r(this,s)).then(a=>{n(a)}):n(r(this,s))}catch(o){return console.error(o)}n(e.contentAsJson())}),e.destroy()}),this.switchThemeEventSet.add(this._echartsOnSwitchTheme),this._echartsOnSwitchTheme(),this._echartsOnResize=this._echartsOnResize||(()=>{for(let e=0;e<this._echartsArr.length;e++)this._echartsArr[e].resize()}),this.resizeEventSet.add(this._echartsOnResize))}initMapbox(){this.config.mapbox&&(mapboxgl.accessToken||(mapboxgl.accessToken=this.config.mapbox.accessToken,mapboxgl.setRTLTextPlugin(this.config.mapbox.RTLTextPlugin),this._mapboxArr=this._mapboxArr||[]),this.util.forEach(document.querySelectorAll(".mapbox:empty"),e=>{let{lng:t,lat:i,zoom:s,lightStyle:n,darkStyle:o,marked:r,markers:a,navigation:h,geolocate:c,scale:y,fullscreen:p}=JSON.parse(e.dataset.options),l=new mapboxgl.Map({container:e,center:[t,i],zoom:s,minZoom:.2,style:this.isDark?o:n,attributionControl:!1});r&&new mapboxgl.Marker().setLngLat([t,i]).addTo(l);let m=typeof a=="string"?JSON.parse(a):a;Array.isArray(m)&&m.length>0&&m.forEach(S=>{let{lng:v,lat:T,description:x}=S,k=new mapboxgl.Popup({offset:25}).setText(x);new mapboxgl.Marker().setLngLat([v,T]).setPopup(k).addTo(l)}),h&&l.addControl(new mapboxgl.NavigationControl,"bottom-right"),c&&l.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,trackUserLocation:!0}),"bottom-right"),y&&l.addControl(new mapboxgl.ScaleControl),p&&l.addControl(new mapboxgl.FullscreenControl),l.addControl(new MapboxLanguage),this._mapboxArr.push(l)}),this._mapboxOnSwitchTheme=this._mapboxOnSwitchTheme||(()=>{this.util.forEach(this._mapboxArr,e=>{let t=e.getContainer(),{lightStyle:i,darkStyle:s}=JSON.parse(t.dataset.options);e.setStyle(this.isDark?s:i),e.addControl(new MapboxLanguage)})}),this.switchThemeEventSet.add(this._mapboxOnSwitchTheme))}initTypeit(e=document){if(this.config.typeit){let t=this.config.typeit,i=t.speed||100,s=t.cursorSpeed||1e3,n=t.cursorChar||"|",o=t.loop??!1,r=e.querySelectorAll(".typeit"),a=Array.from(r).reduce((c,y)=>{let p=y.dataset.group||y.id||Math.random().toString(36).substring(2);return c[p]=c[p]||[],c[p].push(y),c},{}),h=this.util.getStagingDOM();Object.values(a).forEach(c=>{let y=p=>{let l=c[p],m=l.dataset;h.stage(l.querySelector("template").content.cloneNode(!0));let S=l.firstElementChild;l.firstElementChild.tagName==="TEMPLATE"&&(l.innerHTML="",S=l);let v=new TypeIt(S,{strings:h.$el.querySelector("pre")?.innerHTML||h.contentAsHtml(),speed:Number(m.speed)>=0?Number(m.speed):i,lifeLike:!0,cursorSpeed:Number(m.cursorSpeed)>=0?Number(m.cursorSpeed):s,cursorChar:m.cursorChar||n,waitUntilVisible:!0,loop:m.loop?m.loop==="true":o,afterComplete:()=>{let T=Number(m.duration??t.duration);if(p===c.length-1){T>=0&&window.setTimeout(()=>{v.destroy()},T);return}v.destroy(),y(p+1)}}).go()};y(0)}),h.destroy()}}initCommentLightGallery(e,t){document.querySelectorAll(e).forEach(i=>{let s=i.querySelectorAll(t+":not([lightgallery-loaded])");s.forEach(n=>{n.setAttribute("lightgallery-loaded","");let o=document.createElement("a");o.setAttribute("class","comment-lightgallery"),o.setAttribute("href",n.src),o.append(n.cloneNode()),n.replaceWith(o)}),s.length&&lightGallery(i,{selector:".comment-lightgallery",actualSize:!1,hideBarsDelay:2e3,speed:400})})}initComment(){if(this.config.comment?.enable){if(document.querySelector("#comments")){let e=document.querySelector(".view-comments");e.classList.remove("d-none"),e.addEventListener("click",()=>{this.util.scrollIntoView("#comments")},!1)}if(this.config.comment.expired&&document.querySelector("#comments").remove(),this.config.comment.artalk){if(this.config.comment.expired)return Artalk.LoadCountWidget({server:this.config.comment.artalk.server,site:this.config.comment.artalk.site,pvEl:this.config.comment.artalk.pvEl,countEl:this.config.comment.artalk.countEl});let e=Artalk.init(this.config.comment.artalk);return e.setDarkMode(this.isDark),this.switchThemeEventSet.add(()=>{e.setDarkMode(this.isDark)}),e.on("comments-loaded",()=>{this.config.comment.artalk.lightgallery&&this.initCommentLightGallery(".atk-comment .atk-content","img:not([atk-emoticon])")}),e}if(this.config.comment.gitalk){this.config.comment.gitalk.body=decodeURI(window.location.href);let e=new Gitalk(this.config.comment.gitalk);return e.render("gitalk"),e}if(this.config.comment.valine)return new Valine(this.config.comment.valine);if(this.config.comment.waline){if(this.config.comment.expired){this.config.comment.waline.pageview&&Waline.pageviewCount({serverURL:this.config.comment.waline.serverURL,path:window.location.pathname});return}return Waline.init(this.config.comment.waline)}if(this.config.comment.utterances){let e=this.config.comment.utterances,t=document.createElement("script");t.src="https://utteranc.es/client.js",t.setAttribute("repo",e.repo),t.setAttribute("issue-term",e.issueTerm),e.label&&t.setAttribute("label",e.label),t.setAttribute("theme",this.isDark?e.darkTheme:e.lightTheme),t.crossOrigin="anonymous",t.async=!0,document.getElementById("utterances").appendChild(t),this._utterancesOnSwitchTheme=this._utterancesOnSwitchTheme||(()=>{let i={type:"set-theme",theme:this.isDark?e.darkTheme:e.lightTheme};document.querySelector(".utterances-frame")?.contentWindow.postMessage(i,"https://utteranc.es")}),this.switchThemeEventSet.add(this._utterancesOnSwitchTheme);return}if(this.config.comment.twikoo){let e=this.config.comment.twikoo;e.lightgallery&&(e.onCommentLoaded=()=>{this.initCommentLightGallery(".tk-comments .tk-content","img:not(.tk-owo-emotion)")}),twikoo.init(e),e.commentCount&&twikoo.getCommentsCount({envId:e.envId,region:e.region,urls:[window.location.pathname],includeReply:!1}).then(function(t){let i=document.getElementById("twikoo-comment-count");i&&(i.innerHTML=t[0].count)});return}if(this.config.comment.giscus){let e=this.config.comment.giscus;this._giscusOnSwitchTheme=this._giscusOnSwitchTheme||(()=>{let t={setConfig:{theme:this.isDark?e.darkTheme:e.lightTheme}};document.querySelector(".giscus-frame")?.contentWindow.postMessage({giscus:t},e.origin)}),this.switchThemeEventSet.add(this._giscusOnSwitchTheme),this._messageListener=t=>{if(t.origin!==e.origin)return;let i=document.querySelector("#giscus>script");i&&i.parentElement.removeChild(i),this._giscusOnSwitchTheme(),window.removeEventListener("message",this._messageListener,!1)},window.addEventListener("message",this._messageListener,!1);return}}}initCookieconsent(){this.config.cookieconsent&&window.cookieconsent?.initialise(this.config.cookieconsent)}getSiteTime=()=>{let e=new Date,t=new Date(this.config.siteTime),i=document.querySelector(".run-times");if(!this.util.isValidDate(t)||!i){clearInterval(this.siteTime),i&&i.parentNode.remove();return}let s=(e-t)/1e3,n=Math.floor(s/60/60/24),o=Math.floor(s/60/60-24*n),r=Math.floor(s/60-1440*n-60*o),a=Math.floor((e-t)/1e3-1440*60*n-3600*o-60*r);i.innerHTML=`${n}, ${String(o).padStart(2,0)}:${String(r).padStart(2,0)}:${String(a).padStart(2,0)}`,document.querySelector(".site-time .d-none")?.classList.remove("d-none")};initSiteTime(){this.config.siteTime&&(this.siteTime=setInterval(this.getSiteTime,500),document.addEventListener("visibilitychange",()=>{if(document.hidden)return clearInterval(this.siteTime);this.siteTime=setInterval(this.getSiteTime,500)},!1))}initServiceWorker(){this.config.enablePWA&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("/service-worker.min.js",{scope:"/"}).then(function(e){}).catch(function(e){console.error("error: ",e)}),navigator.serviceWorker.ready.then(function(e){}))}initWatermark(){this.config.watermark?.enable&&new Watermark(this.config.watermark)}initPangu(){if(!this.config.pangu?.enable)return;let e=this.config.pangu.selector;if(e){pangu.ignoredTags=/^(script|code|pre|textarea|sup|sub)$/i,e.startsWith("#")?pangu.spacingElementById(e.slice(1)):e.startsWith(".")?pangu.spacingElementByClassName(e.slice(1)):pangu.spacingElementByTagName(e);return}pangu.autoSpacingPage()}initMathJax(){window.MathJax?.typesetPromise&&window.MathJax.typesetPromise().then(()=>{}).catch(e=>console.log(e.message))}initJsonViewer(){window.JsonViewerElement&&(this._jsonViewerOnSwitchTheme=this._jsonViewerOnSwitchTheme||(()=>{this.util.forEach(document.getElementsByTagName("json-viewer"),e=>{e.setAttribute("theme",this.isDark?"dark":"light")})}),this.switchThemeEventSet.add(this._jsonViewerOnSwitchTheme),this._jsonViewerOnSwitchTheme())}initTabEvents(e=document){e.addEventListener("tab-container-changed",()=>{this.fileTree.updateLineHeight(e),window.FixItMermaid?.init?.()},!1)}_initContentComponents(e=document,t=!1){this.initTwemoji(e),this.initDetails(e),this.initLightGallery(),this.initCodeWrapper(),this.initDiagramCopyBtn(),this.initEcharts(),this.initTypeit(e),this.initMapbox(),t&&(this.fixTocScroll(),this.initToc(),this.initTocListener(),this.initTocDialog()),this.initPangu(),this.initMathJax(),this.initJsonViewer(),this.initTabEvents(e),this.fileTree.init(e),window.FixItMermaid?.init?.(),window.FixItAPlayer?.init?.()}_toggleEncryptedClass(e,t){let i=t?"encrypted-hidden":"decrypted-shown",s=t?"decrypted-shown":"encrypted-hidden";this.util.forEach(e.querySelectorAll(`.${i}`),n=>{n.classList.replace(i,s)})}initFixItDecryptor(){this.decryptor=new FixItDecryptor({decrypted:()=>{this._initContentComponents(document,!0),this._toggleEncryptedClass(document,!0)},partialDecrypted:e=>{this._initContentComponents(e,!1),this._toggleEncryptedClass(e,!0)},reset:()=>{this._toggleEncryptedClass(document,!1)}}),this.decryptor.init(this.config.encryption)}initAutoMark(){if(!this.config.autoBookmark)return;window.addEventListener("beforeunload",()=>{window.sessionStorage?.setItem(`fixit-bookmark/#${location.pathname}`,this.util.getScrollTop())});let e=Number(window.sessionStorage?.getItem(`fixit-bookmark/#${location.pathname}`));e&&location.hash===""&&window.scrollTo({top:e,behavior:"smooth"})}initReward(){let e=document.querySelectorAll('.post-reward [data-mode="fixed"]');if(!e.length)return;if(this.util.isMobile()){this.util.forEach(e,i=>{i.removeAttribute("data-mode")});return}let t=i=>{this.util.forEach(e,s=>{let n=s.parentElement.querySelector(".reward-input");n.id!==i&&(n.checked=!1)})};this.util.forEach(e,i=>{i.previousElementSibling.addEventListener("click",function(){t(this.getAttribute("for"))},!1)}),this.scrollEventSet.add(t)}initPostChatUser(){!window.postChatUser||!postChatConfig||postChatConfig.userMode==="magic"||(postChat_theme=this.isDark?"dark":"light",this.switchThemeEventSet.add(e=>{document.getElementById("postChat_iframeContainer")?window.postChatUser.setPostChatTheme(e?"dark":"light"):postChat_theme=e?"dark":"light"}))}onScroll(){let e=[],i=document.querySelector(".back-to-top"),s=document.querySelector(".reading-progress-bar");document.body.dataset.headerDesktop==="auto"&&e.push(document.getElementById("header-desktop")),document.body.dataset.headerMobile==="auto"&&e.push(document.getElementById("header-mobile")),i?.addEventListener("click",()=>{this.util.scrollIntoView("body")}),window.addEventListener("scroll",n=>{if(this.disableScrollEvent){n.preventDefault();return}let o=document.getElementById("mask");this.newScrollTop=this.util.getScrollTop();let r=this.newScrollTop-this.oldScrollTop;this.util.forEach(e,c=>{r>20?(c.classList.remove("animate__fadeInDown"),this.util.animateCSS(c,["animate__fadeOutUp"],!0),o.click()):r<-20&&(c.classList.remove("animate__fadeOutUp"),this.util.animateCSS(c,["animate__fadeInDown"],!0),o.click())});let a=document.body.scrollHeight-window.innerHeight,h=Math.max(Math.min(100*Math.max(this.newScrollTop,0)/a,100),0);if(s&&s.style.setProperty("--progress",`${h.toFixed(2)}%`),i&&(h>1?(i.classList.remove("d-none","animate__fadeOut"),this.util.animateCSS(i,["animate__fadeIn"],!0)):(i.classList.remove("animate__fadeIn"),this.util.animateCSS(i,["animate__fadeOut"],!0,()=>{i.classList.contains("animate__fadeOut")&&i.classList.add("d-none")})),i.style.setProperty("--fi-b2t-progress",h.toFixed(2)),navigator.userAgent.toLowerCase().indexOf("firefox")>-1)){let c=2*Math.PI*50*(1-h/100);i.querySelector("circle.progress").style.strokeDashoffset=c.toFixed(2)}for(let c of this.scrollEventSet)c();this.oldScrollTop=this.newScrollTop},!1)}onResize(){let e=this.util.isMobile();window.addEventListener("resize",()=>{this._resizeTimeout||(this._resizeTimeout=window.setTimeout(()=>{this._resizeTimeout=null;for(let i of this.resizeEventSet)i();this.initToc(),this.initSearch();let t=this.util.isMobile();t!==e&&(document.getElementById("mask").click(),e=t)},100))},!1)}onClickMask(){document.getElementById("mask").addEventListener("click",()=>{if(document.body.classList.contains("blur")){for(let e of this.clickMaskEventSet)e();this.disableScrollEvent=!1,document.body.classList.remove("blur")}},!1)}beforeprint(){window.addEventListener("beforeprint",()=>{this.util.forEach(document.querySelectorAll(".chroma"),e=>{e.classList.toggle("open",!0)});for(let e of this.beforeprintEventSet)e()},!1)}init(){try{this.config.encryption&&this.initFixItDecryptor(),this.config.encryption?.all||this._initContentComponents(document,!1),this.initThemeColor(),this.initSVGIcon(),this.initMenu(),this.initSwitchTheme(),this.initSearch(),this.initBreadcrumb(),this.initCookieconsent(),this.initSiteTime(),this.initServiceWorker(),this.initWatermark(),this.initAutoMark(),this.initReward(),this.initPostChatUser(),window.setTimeout(()=>{this.initComment(),this.config.encryption?.all||(this.fixTocScroll(),this.initToc(),this.initTocListener(),this.initTocDialog()),this.onScroll(),this.onResize(),this.onClickMask(),this.beforeprint()},100)}catch(e){console.error(e)}console.log(`%c FixIt ${this.config.version} %c https://github.com/hugo-fixit %c`,"background: #FF735A;border:1px solid #FF735A; padding: 1px; border-radius: 2px 0 0 2px; color: #fff;","border:1px solid #FF735A; padding: 1px; border-radius: 0 2px 2px 0; color: #FF735A;","background:transparent;")}},P=()=>{window.fixit=new O,window.fixit.init()};document.readyState!=="loading"?P():document.addEventListener("DOMContentLoaded",P,!1);})();
