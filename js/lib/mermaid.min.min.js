import mermaid from"https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";mermaid.startOnLoad=!1;const mermaidConfig={cdn:"",fontfamily:"",look:"handDrawn",securitylevel:"loose",themes:["default","dark"],zenuml:""};let processing=!1,delayTask=null;function getTheme(e){const t=document.documentElement.dataset.theme==="dark";return(e?!t:t)?mermaidConfig.themes[1]:mermaidConfig.themes[0]}async function loadMermaid({theme:e,darkMode:t,selector:n}){if(processing){console.warn("Mermaid is still processing, delaying the reload."),delayTask=()=>loadMermaid({theme:e,darkMode:t,selector:n});return}const i=t??document.documentElement.dataset.theme==="dark",s=e??getTheme(),a=n??(i?".mermaid-dark":".mermaid"),o=document.querySelectorAll(a);if(!o.length)return;console.time(`Loaded [${s}]`),processing=!0,o.forEach(e=>{e.toggleAttribute("data-processing",!0)}),mermaid.initialize({startOnLoad:!1,darkMode:i,theme:s,securityLevel:mermaidConfig.securitylevel,look:mermaidConfig.look,fontFamily:mermaidConfig.fontfamily,altFontFamily:mermaidConfig.fontfamily}),await mermaid.run({nodes:o,suppressErrors:!0,postRenderCallback:e=>{document.getElementById(e).parentElement.toggleAttribute("data-processing",!1)}}),processing=!1,console.timeEnd(`Loaded [${s}]`),delayTask&&typeof delayTask=="function"&&(delayTask(),delayTask=null)}async function initMermaid(){const t=document.querySelectorAll(".mermaid, .mermaid-dark, .mermaid-neutral");if(!t.length)return;console.log(`%cðŸ’« FixIt Mermaid`,"color: #FF3670; font-weight: bold; font-size: 16px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);");const n=getTheme(),s=getTheme(!0),e=document.documentElement.dataset.theme==="dark";await loadMermaid({theme:n,darkMode:e}),await loadMermaid({theme:s,darkMode:!e}),await loadMermaid({theme:"neutral",darkMode:!1,selector:".mermaid-neutral"})}window.FixItMermaid={config:mermaidConfig,load:loadMermaid,init:initMermaid},window.mermaid=mermaid,document.readyState!=="loading"?initMermaid():document.addEventListener("DOMContentLoaded",initMermaid,!1)