<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Vue2 - æ ‡ç­¾ - è èœçœ¾é•·</title><link>https://lruihao.cn/tags/vue2/</link><description>Vue2 - æ ‡ç­¾ - è èœçœ¾é•·</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>1024@lruihao.cn (Lruihao)</managingEditor><webMaster>1024@lruihao.cn (Lruihao)</webMaster><copyright>æœ¬ç«™å†…å®¹é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0ï¼ˆCC BY-NC 4.0ï¼‰å›½é™…è®¸å¯åè®®ã€‚</copyright><lastBuildDate>Mon, 25 Sep 2023 17:49:58 +0800</lastBuildDate><atom:link href="https://lruihao.cn/tags/vue2/" rel="self" type="application/rss+xml"/><item><title>å¦‚ä½•è®© Element UI è¡¨å¤´ã€è¡¨å°¾ã€æ¨ªå‘æ»šåŠ¨æ¡å¸é¡¶å¸åº•å›ºå®šï¼Ÿ</title><link>https://lruihao.cn/projects/el-table-sticky/</link><pubDate>Mon, 25 Sep 2023 17:49:58 +0800</pubDate><author>Lruihao</author><guid>https://lruihao.cn/projects/el-table-sticky/</guid><description><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼å®ç° Element UI è¡¨æ ¼çš„è¡¨å¤´å¸é¡¶ã€è¡¨å°¾å¸åº•ã€æ»šåŠ¨æ¡å¸åº•ä»¥åŠé«˜åº¦è‡ªé€‚åº”åŠŸèƒ½ã€‚</p>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>Element UI çš„è¡¨æ ¼ç»„ä»¶åœ¨ä½¿ç”¨æ—¶ï¼Œå¦‚æœè¡¨æ ¼å†…å®¹è¿‡å¤šï¼Œè¡¨æ ¼ä¼šå‡ºç°æ»šåŠ¨æ¡ï¼Œä½†æ˜¯è¡¨å¤´ä¸ä¼šå¸é¡¶ï¼Œè¡¨å°¾åˆè®¡è¡Œä¹Ÿä¸ä¼šå¸åº•ï¼Œè¿™æ ·åœ¨è¡¨æ ¼å†…å®¹è¿‡å¤šæ—¶ï¼Œè¡¨å¤´å’Œè¡¨å°¾åˆè®¡è¡Œå°±ä¼šè¢«é®æŒ¡ï¼Œå¦‚æœæœ‰æ¨ªå‘æ»šåŠ¨æ¡ï¼Œæ¯æ¬¡æƒ³æ»šåŠ¨å¿…é¡»æ»‘åŠ¨åˆ°æœ€åº•ä¸‹ï¼Œè¿™ä¸€ç³»åˆ—ç—›ç‚¹ï¼Œéå¸¸å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>Element UI çš„è§£å†³åŠæ³•</strong>ï¼šé€šè¿‡è®¾ç½® <code>max-height</code> æˆ–è€… <code>height</code> å±æ€§æ¥å®ç°ä¸Šè¿°éœ€æ±‚ã€‚</p>
<p><strong>Element UI çš„è§£å†³ä¸è¶³ç‚¹</strong>ï¼šé«˜åº¦å€¼åªæ”¯æŒè®¾ç½®æ•°å­—å‹ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¾€å¾€éœ€è¦å€ŸåŠ© JS æ¥è®¡ç®—ã€‚</p>
<p>ä¸ºäº†è§£å†³ä»¥ä¸Šç—›ç‚¹/éœ€æ±‚ï¼Œå‡å°‘å¼€å‘å’Œç»´æŠ¤æˆæœ¬ï¼Œäºæ˜¯æˆ‘å¼€å‘äº† <a href="https://github.com/Lruihao/el-table-sticky"target="_blank" rel="external nofollow noopener noreferrer">el-table-sticky<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> æ’ä»¶ï¼Œ<a href="https://lruihao.github.io/el-table-sticky/"target="_blank" rel="external nofollow noopener noreferrer">åœ¨çº¿ç¤ºä¾‹<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ã€‚</p>
<!-- markdownlint-disable-next-line no-bare-urls -->
<a href="https://github.com/Lruihao/el-table-sticky"target="_blank" rel="external nofollow noopener noreferrer" class="card-link"><span class="cl-backdrop" style="--cl-bg-url: url(/fixit.min.svg);"></span>
    <span class="cl-content">
      <span class="cl-text">
        <span class="cl-title">el-table-stick</span>
        <span class="cl-meta">
          <svg class="cl-icon-link" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1z" fill="#a9a9b3"></path><path d="M610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" fill="#a9a9b3"></path></svg>
          <span class="cl-url">https://github.com/Lruihao/el-table-sticky</span>
        </span>
      </span><svg class="cl-icon-globe" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path d="M960 512c0 249.408-203.2 448-448 448-244.778667 0-448-198.592-448-448S262.592 64 512 64s448 198.592 448 448" fill="#2196F3"></path><path d="M507.52 718.08c0-8.96-4.48-13.44-13.44-17.92-26.88-8.96-53.76-8.96-76.16-31.381333-4.48-8.96-4.48-17.92-8.96-26.88-8.96-8.96-31.36-13.44-44.8-17.92h-89.6c-13.44-4.48-22.4-22.4-31.36-35.84 0-4.48 0-13.461333-8.96-13.461334-8.96-4.458667-17.92 4.501333-26.88 0-4.48-4.458667-4.48-8.96-4.48-13.418666 0-13.461333 8.96-26.901333 17.92-35.861334 13.44-8.96 26.88 4.48 40.32 4.48 4.48 0 4.48 0 8.96 4.48 13.44 4.48 17.92 22.4 17.92 35.861334v8.96c0 4.48 4.48 4.48 8.96 4.48 4.48-22.4 4.48-44.821333 8.96-67.2 0-26.88 26.88-53.781333 49.28-62.72 8.96-4.458667 13.44 4.501333 22.4 0 26.88-8.96 94.08-35.84 80.64-71.658667-8.96-31.381333-35.84-62.698667-71.68-58.24-8.96 4.501333-13.44 8.96-22.4 13.461333-13.44 8.96-40.32 35.84-53.76 35.84-22.4-4.48-22.4-35.84-17.92-49.301333 4.48-17.92 44.8-76.138667 71.68-67.178667l17.92 17.92c8.96 4.48 22.4 4.48 35.84 4.48 4.48 0 8.96 0 13.44-4.48 4.48-4.48 4.48-4.48 4.48-8.96 0-13.44-13.44-26.901333-22.4-35.861333s-22.4-17.92-35.84-22.378667c-44.8-13.461333-116.48 4.458667-152.32 35.84-35.84 31.36-62.72 85.12-80.64 129.92-8.96 26.88-17.92 62.698667-22.4 94.08-4.48 22.4-8.96 40.32 4.48 62.698667 13.44 26.88 40.32 53.781333 67.2 71.68 17.92 13.44 53.76 13.44 71.68 35.84 13.44 17.941333 8.96 40.32 8.96 62.72 0 26.88 17.92 49.28 26.88 71.658667 4.48 13.461333 8.96 31.381333 13.44 44.821333 0 4.48 4.48 31.36 4.48 35.84 26.88 13.44 49.28 26.901333 80.64 35.861333 4.48 0 22.4-26.901333 22.4-31.381333 13.44-13.44 22.4-31.36 35.84-40.32 8.96-4.48 17.92-8.96 26.88-17.941333 8.96-8.96 13.44-26.88 17.92-40.32 4.48-8.938667 8.96-26.858667 4.48-40.298667M516.48 305.92c4.48 0 8.96-4.48 17.92-8.96 13.44-8.96 26.901333-22.4 40.32-31.36 13.461333-8.96 26.901333-22.4 35.861333-31.36 13.44-8.96 22.4-26.88 26.88-40.341333 4.48-8.96 17.941333-26.88 13.44-40.32-4.48-8.96-26.88-13.44-35.84-17.92C579.2 126.698667 547.84 122.24 512 122.24c-13.44 0-31.36 4.458667-35.84 17.92-4.48 22.4 13.44 17.92 31.36 22.4 0 0 4.48 35.84 4.48 40.32 4.48 22.421333-8.96 35.84-8.96 58.24 0 13.44 0 35.84 8.96 44.8h4.48zM892.8 619.52c4.501333-8.96 4.501333-22.4 8.96-31.36 4.501333-22.421333 4.501333-44.8 4.501333-67.2 0-44.8-4.501333-89.578667-17.92-129.92-8.96-13.44-13.461333-26.88-17.941333-40.341333-8.96-22.378667-22.4-44.8-40.32-62.698667-17.92-22.4-40.341333-85.12-80.64-67.2-13.44 4.501333-22.4 22.421333-31.36 31.381333l-26.88 40.32c-4.501333 4.48-8.96 13.44-4.501333 17.92 0 4.48 4.501333 4.48 8.96 4.48 8.96 4.501333 13.461333 4.501333 22.421333 8.96 4.48 0 8.96 4.501333 4.48 8.96 0 0 0 4.501333-4.48 4.501334-22.421333 22.4-44.8 40.32-67.2 62.698666-4.48 4.48-8.96 13.44-8.96 17.92s4.48 4.48 4.48 8.96c0 4.501333-4.48 4.501333-8.96 8.96-8.96 4.501333-17.92 8.96-22.4 13.461334-4.48 8.96 0 22.4-4.48 31.36-4.48 22.4-17.941333 40.32-26.901333 62.72-8.96 13.418667-13.418667 26.88-22.378667 40.32 0 17.92-4.501333 31.36 4.458667 44.8 22.421333 31.36 62.72 13.44 94.08 26.901333 8.96 4.458667 17.92 4.458667 22.421333 13.418667 13.418667 13.461333 13.418667 35.861333 17.92 49.301333 4.458667 17.92 8.96 35.84 17.92 53.76 4.48 22.421333 13.44 44.821333 17.92 62.72 40.341333-31.36 76.16-67.178667 103.04-112 26.88-31.424 40.341333-67.242667 53.76-103.104" fill="#CDDC39"></path></svg></span></a>
<blockquote>
<p><em>å¦‚æœä½ è§‰å¾—è¿™ä¸ªæ’ä»¶è¿˜ä¸é”™ï¼Œèµä¸ª star å§ ğŸ˜›ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å®ç°æ–¹æ¡ˆï¼Œæ¬¢è¿æ issue æˆ–è€… PRã€‚</em></p>
</blockquote>
<h2 id="è§£å†³æ€è·¯">è§£å†³æ€è·¯</h2>
<p>el-table-sticky æ’ä»¶ä»ä¸¤ä¸ªä¸åŒçš„è§’åº¦è§£å†³é—®é¢˜ï¼š</p>
<ol>
<li>
<p>é€šè¿‡ <code>position: sticky</code> å±æ€§ï¼Œè®© el-table çš„è¡¨å¤´ç­‰å…ƒç´ å›ºå®š</p>
</li>
<li>
<p>æ²¿ç”¨ Element UI çš„ <code>max-height</code> å’Œ <code>height</code> å±æ€§ï¼Œé€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼ï¼Œè®© el-table çš„è¡¨æ ¼å†…å®¹é«˜åº¦è‡ªé€‚åº”</p>
</li>
</ol>
<p>æ’ä»¶åŒ…å« 4 ä¸ªæŒ‡ä»¤ï¼š</p>
<ul>
<li><code>v-sticky-header</code>ï¼šè¡¨å¤´å¸é¡¶</li>
<li><code>v-sticky-footer</code>ï¼šè¡¨å°¾å¸åº•</li>
<li><code>v-sticky-scroller</code>ï¼šæ¨ªå‘æ»šåŠ¨æ¡å¸åº•</li>
<li><code>v-height-adaptive</code>ï¼šé«˜åº¦è‡ªé€‚åº”</li>
</ul>
<p>ç›®å‰ 4 ä¸ªæŒ‡ä»¤åœ¨ 1.x ç‰ˆæœ¬éƒ½å·²å¼€å‘å®Œæˆï¼Œå·²å‘å¸ƒåˆ° npm ä¸Šï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install @cell-x/el-table-sticky</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“ä½¿ç”¨æ–¹å¼ï¼Œæœ¬æ–‡ä¸åšèµ˜è¿°ï¼Œè¯¦è§ README.mdã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°è¿™äº›åŠŸèƒ½ã€‚</p>
<h3 id="è¡¨å¤´å¸é¡¶è¡¨å°¾å¸åº•">è¡¨å¤´å¸é¡¶&amp;è¡¨å°¾å¸åº•</h3>
<p>è¡¨å¤´å¸é¡¶æ˜¯æˆ‘æœ€è¿«åˆ‡æƒ³è¦è§£å†³çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨ 0.x ç‰ˆæœ¬å¼€å‘å®Œï¼Œæˆ‘å°±é©¬ä¸Šå‘å¸ƒå¹¶åœ¨å…¬å¸è€é¡¹ç›®ä¸­å¼•å…¥äº†ã€‚</p>
<p>æ€è·¯æ‹†è§£ï¼š</p>
<ol>
<li>æ‰¾åˆ° el-table__header å¹¶èµ‹äºˆ sticky top ç‰¹æ€§</li>
<li>Debug å‘ç°å¦‚æœ el-table-column è®¾ç½®äº† fixed å€¼ï¼ŒElement UI ä½¿ç”¨çš„æ˜¯ fixed å®šä½ï¼Œå¹¶å°† el-table__header å¯¹åº”çš„æ ä½éšè—</li>
<li>el-table__header sticky åä¸ºäº†è®©å›ºå®šæ ä½ä¿æŒå’Œ Element UI ä¸€æ ·çš„æ•ˆæœï¼Œéœ€è¦æ‰¾åˆ°è¿™äº›æ ä½ï¼Œè®¾ç½®ä¸º stickyï¼Œç„¶åæŒ‰å·¦å³æ–¹å‘å †å ä½ç½®</li>
</ol>
<p>å®ç°è¡¨å¤´å¸é¡¶åï¼Œå†çœ‹è¡¨å°¾åˆå¹¶è¡Œå¸åº•æ•ˆæœä¹Ÿå°±æ˜¯ä¾è‘«èŠ¦ç”»ç“¢ï¼Œæ€è·¯ä¸€æ ·ï¼Œäºæ˜¯ä¸ºäº†å¤ç”¨ä»£ç ï¼Œæˆ‘æŠ½ç¦»å‡ºæ¥ä¸€ä¸ª <a href="https://github.com/Lruihao/el-table-sticky/blob/main/src/utils/sticky.js#L9"target="_blank" rel="external nofollow noopener noreferrer">Sticky Class<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ã€‚</p>
<h3 id="é«˜åº¦è‡ªé€‚åº”">é«˜åº¦è‡ªé€‚åº”</h3>
<blockquote>
<p>æ²¿ç”¨ Element UI çš„ <code>max-height</code> å’Œ <code>height</code> å±æ€§ï¼Œæ‰€ä»¥ el-table åˆå§‹åŒ–æ—¶å¿…é¡»è®¾ç½®é«˜åº¦ã€‚</p>
</blockquote>
<p>è¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œç›‘å¬ el-table å…ƒç´ çš„ resizeï¼Œç„¶å JS è®¡ç®—å‡ºè¡¨æ ¼çš„å¯ç”¨é«˜åº¦ï¼Œæœ€åè°ƒç”¨ <code>$table.layout.setHeight</code> è®¾ç½®é«˜åº¦å³å¯ã€‚</p>
<h3 id="æ¨ªå‘æ»šåŠ¨æ¡å¸åº•">æ¨ªå‘æ»šåŠ¨æ¡å¸åº•</h3>
<p>è¿™ä¸ªæŒ‡ä»¤çš„å®ç°æˆ‘æ”¾åœ¨æœ€åï¼Œä¸»è¦çš„éš¾ç‚¹åœ¨äºå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æ»šåŠ¨æ¡ä»£æ›¿åŸç”Ÿæ»šåŠ¨æ¡çš„é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å¼€å‘è¿‡ç¨‹ï¼š</p>
<ol>
<li>æœ€å¼€å§‹çœ‹åˆ°äº†ä¸€ä¸ªæ’ä»¶ <a href="https://github.com/mizuka-wu/el-table-horizontal-scroll"target="_blank" rel="external nofollow noopener noreferrer">el-table-horizontal-scroll<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ï¼Œå®ƒçš„åšæ³•æ˜¯æ‰‹åŠ¨ç»™ el-table åŠ ä¸Šä¸€ä¸ª el-scrollbar å¹¶ç»‘å®šäº‹ä»¶å¤„ç†ï¼Œäºæ˜¯å†³å®šä½¿ç”¨å®ƒçš„æ–¹æ¡ˆï¼Œä½†æ˜¯çœ‹äº†æºç ï¼Œå®ƒä½¿ç”¨çš„ fixed å®šä½å’Œæˆ‘é¢„æƒ³æœ‰å·®è·ï¼Œè€Œä¸”æ‰‹åŠ¨ç»‘å®šäº‹ä»¶ï¼Œå¯èƒ½æœ‰å¾ˆå¤šç»†èŠ‚é—æ¼ï¼Œç»´æŠ¤èµ·æ¥æˆ–æœ‰è¯¸å¤šä¸ä¾¿ã€‚</li>
<li>ç„¶åï¼Œæˆ‘æƒ³èƒ½ä¸èƒ½é€šè¿‡ render å‡½æ•°ç›´æ¥æ¸²æŸ“ä¸€ä¸ª el-scrollbarï¼Œæˆ‘å°±å»çœ‹ el-scrollbar çš„æºç ï¼Œæ‰“å¼€æºç æœ‰æƒŠå–œï¼Œç¬¬ä¸€è¡Œæ³¨é‡Šæ‰¾åˆ°äº†<a href="https://github.com/noeldelgado/gemini-scrollbar"target="_blank" rel="external nofollow noopener noreferrer">gemini-scrollbar<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> è¿™ä¸ªæ’ä»¶ï¼Œæ‰“å¼€ Github çœ‹äº†ä¸€ä¸‹ï¼Œèƒ½å¤Ÿå®ç°é¢„æœŸæ•ˆæœã€‚</li>
<li>å¼€é€ æ€è·¯ï¼š
<ol>
<li>åœ¨ el-table ä¸­åˆ›å»ºä¸€ä¸ªç©ºå…ƒç´ å½“ä½œ scrollerï¼Œå®½åº¦ä¿æŒå’Œè¡¨æ ¼å†…å®¹å®½åº¦ä¸€è‡´</li>
<li>ä¸º scroller åˆ›å»ºè‡ªå®šä¹‰æ»šåŠ¨æ¡ï¼Œå¹¶èµ‹äºˆ sticky bottom ç‰¹æ€§</li>
<li>åŒæ­¥ el-table æ¨ªå‘æ»šåŠ¨çš„è¡Œä¸ºåˆ° scroller</li>
<li>åŒæ­¥ scroller æ¨ªå‘æ»šåŠ¨çš„è¡Œä¸ºåˆ° el-table</li>
</ol>
</li>
</ol>
<p>A few moments later&hellip;</p>
<p>ç»è¿‡ä¸€ç•ª codeï¼Œå®ç°äº†æ¨ªå‘æ»šåŠ¨æ¡çš„å¸åº•å›ºå®šæ•ˆæœï¼Œä½†æ˜¯åŸºäº <a href="https://github.com/noeldelgado/gemini-scrollbar"target="_blank" rel="external nofollow noopener noreferrer">gemini-scrollbar<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> å®ç°ï¼Œå­˜åœ¨ä»¥ä¸‹å·²çŸ¥é—®é¢˜ï¼š</p>
<ul>
<li>
<p><i class="fa-regular fa-square fa-fw" aria-hidden="true"></i> safari æµè§ˆå™¨å­˜åœ¨å…¼å®¹æ€§<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
</li>
<li>
<p><i class="fa-regular fa-check-square fa-fw" aria-hidden="true"></i> å½“ç¦ç”¨åŸç”Ÿæ»šåŠ¨æ¡æ—¶ï¼Œgemini-scrollbar è®¡ç®—æ»‘å—åç§»è·ç¦»æ—¶å­˜åœ¨è¯¯å·®ï¼Œ<a href="https://github.com/Lruihao/el-table-sticky/blob/5c80091e21841fdb78264cde52ab1588b7991e02/src/utils/scroller.js#L75-L83"target="_blank" rel="external nofollow noopener noreferrer">è¯¦è§<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</li>
</ul>
<p>æœ€åä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œå°† <code>v-sticky-scroller</code> çš„åŠŸèƒ½å†…ç½®åˆ°äº† <code>v-sticky-header</code> å’Œ <code>v-sticky-footer</code> æŒ‡ä»¤ä¸­ï¼Œä½¿ç”¨æ—¶æ— éœ€é‡å¤ä½¿ç”¨ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä¸€å¿µå¯¹å¼€æºè ¢è ¢æ¬²åŠ¨ï¼Œä¸€å¿µå¯¹ç»´æŠ¤çŠ¹è±«ä¸å†³ï¼Œä¸€å¿µæˆå°±å¼€æºï¼Œä¸€å¿µæˆå°±è‡ªå·±ã€‚</p>
<blockquote class="blockquote-center">
  <p>Non sunt multiplicanda entia sine necessitate</p>
<p>è‹¥æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“</p>

</blockquote>
<p>ä¸åˆ°è¿«ä¸å¾—å·²ï¼Œä¸è¦è½»æ˜“é€ è½®å­ï¼Œè¦å–„äºå‘ç°å’Œåˆ©ç”¨å·²æœ‰çš„è½®å­ã€æœ€ç†æƒ³çš„çŠ¶æ€å°±æ˜¯æ°¸è¿œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‚</p>
<p>ä½†æ˜¯é€šè¿‡é€ è½®å­ï¼Œå¯ä»¥æ›´å¥½çš„å­¦ä¹ å’Œç†è§£æŠ€æœ¯ï¼Œä¹Ÿèƒ½ä½“ä¼šåˆ°å¾ˆå¤šå†™ä¸šåŠ¡ä»£ç ä¸èƒ½æ„Ÿå—åˆ°çš„å¿«ä¹ã€‚</p>
<p>å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚</p>
<!-- footnote reference definition -->
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><em>å¦‚æœ‰å¿…è¦ï¼Œä»¥åç‰ˆæœ¬éœ€è¦æ›¿æ¢ gemini-scrollbar å®ç°è‡ªå®šä¹‰æ»šåŠ¨æ¡çš„åŠŸèƒ½ã€‚</em>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>]]></description></item><item><title>å°è£… Vue FullScreenToggler ç»„ä»¶</title><link>https://lruihao.cn/posts/vue-fullscreen-toggler/</link><pubDate>Sun, 17 Sep 2023 19:44:07 +0800</pubDate><author>Lruihao</author><guid>https://lruihao.cn/posts/vue-fullscreen-toggler/</guid><description><![CDATA[<p>åŸºäº <a href="https://github.com/mirari/vue-fullscreen"target="_blank" rel="external nofollow noopener noreferrer">vue-fullscreen<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> å°è£…ä¸€ä¸ªçš„ Vue å…¨å±/é€€å‡ºå…¨å±åˆ‡æ¢ç»„ä»¶ã€‚</p>
<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p><a href="https://github.com/mirari/vue-fullscreen"target="_blank" rel="external nofollow noopener noreferrer">vue-fullscreen<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> æ˜¯ä¸€ä¸ªç”¨äºå°†ä»»æ„é¡µé¢å…ƒç´ è¿›è¡Œå…¨å±åˆ‡æ¢çš„ Vue æ’ä»¶ï¼ŒåŸºäº <a href="https://github.com/sindresorhus/screenfull"target="_blank" rel="external nofollow noopener noreferrer">screenfull<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ã€‚è¿™ä¸ªæ’ä»¶æœ¬èº«æä¾›äº†ç»„ä»¶ã€æŒ‡ä»¤ä»¥åŠ API ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒ <a href="https://github.com/mirari/vue-fullscreen"target="_blank" rel="external nofollow noopener noreferrer">vue-fullscreen<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ã€‚</p>
<h2 id="åœ¨çº¿æ¼”ç¤ºhttpslruihaogithubiovue-el-demofullscreen"><a href="https://lruihao.github.io/vue-el-demo/#/fullscreen"target="_blank" rel="external nofollow noopener noreferrer">åœ¨çº¿æ¼”ç¤º<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></h2>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install vue-fullscreen@^2.6.1
</span></span><span class="line"><span class="cl"><span class="c1"># æˆ–è€…</span>
</span></span><span class="line"><span class="cl">yarn add vue-fullscreen@^2.6.1</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å°è£…ç»„ä»¶">å°è£…ç»„ä»¶</h2>
<p><code>vue-fullscreen</code> æœ‰ Vue2 å’Œ Vue3 ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæœ¬æ–‡å°†åŸºäºå…¶ Vue2 ç‰ˆæœ¬çš„æŒ‡ä»¤ä½¿ç”¨æ–¹å¼å†å°è£…ä¸€å±‚ã€‚</p>
<p>è¿™ä¸ªç»„ä»¶ä¼šæ˜¾ç¤ºä¸ºä¸€ä¸ªåˆ‡æ¢æŒ‰é’®ï¼Œé€šè¿‡ç»‘å®š <code>target</code> å±æ€§æ¥æŒ‡å®šå…¨å±çš„ç›®æ ‡å…ƒç´ ï¼Œé€šè¿‡ <code>bodyAgent</code> å±æ€§æ¥æŒ‡å®šæ˜¯å¦ä½¿ç”¨ <code>document.body</code> ä»£ç†å…¨å±å…ƒç´ ï¼Œç›®æ ‡å…ƒç´ åˆ™æ”¹ä¸ºç½‘é¡µå…¨å±ï¼Œé¿å…å¼¹çª—ç­‰å…ƒç´ åœ¨å…¨å±æ¨¡å¼ä¸‹ä¸å¯è§çš„é—®é¢˜ã€‚</p>
<div class="details admonition info open">
    <div class="details-summary admonition-title">
      <i class="icon fa-solid fa-info-circle fa-fw" aria-hidden="true"></i>ä¿¡æ¯<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content"><code>vue-fullscreen</code> æ’ä»¶å¤„ç†å¼¹çª—ç­‰å…ƒç´ åœ¨å…¨å±æ¨¡å¼ä¸‹ä¸å¯è§é—®é¢˜çš„æ–¹æ¡ˆæ˜¯é€šè¿‡ <code>teleport</code> ä¿®é¥°ç¬¦å°†ç›®æ ‡å…ƒç´ ç§»åŠ¨åˆ° <code>document.body</code> ä¸‹ï¼Œä»è€Œé¿å…å±‚çº§é®æŒ¡é—®é¢˜ã€‚ä¸ªäººä¸å¤ªå–œæ¬¢è¿™ç§æ”¹å˜ DOM ç»“æ„çš„æ–¹å¼ï¼Œæ‰€ä»¥å°è£…çš„æ’ä»¶æ–°å¢ä¸€ä¸ªå‚æ•° <code>bodyAgent</code>ï¼Œå½“è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œä¼šä½¿ç”¨ <code>document.body</code> ä»£ç†å…¨å±å…ƒç´ ï¼Œç›®æ ‡å…ƒç´ åˆ™æ”¹ä¸ºç½‘é¡µå…¨å±ï¼Œæ­¤æ—¶ <code>document.fullscreenElement</code> ä¸º <code>document.body</code> è€Œä¸æ˜¯çœŸå®è®¾ç½®çš„ <code>target</code> å…ƒç´ ã€‚</div>
    </div>
  </div>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">å…¨å±</span><span class="o">/</span><span class="nx">é€€å‡ºå…¨å±åˆ‡æ¢ç»„ä»¶</span><span class="err">ï¼Œ</span><span class="nx">æµè§ˆå™¨ä¸æ”¯æŒæ—¶</span><span class="err">ï¼Œ</span><span class="nx">æ‰“å¼€ç½‘é¡µå†…å…¨å±</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">directive</span> <span class="nx">as</span> <span class="nx">fullscreen</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-fullscreen&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;FullScreenToggler&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">directives</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fullscreen</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">target</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="s1">&#39;document.body&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * æ˜¯å¦ä½¿ç”¨ document.body ä»£ç†å…¨å±å…ƒç´ ï¼Œç›®æ ‡å…ƒç´ åˆ™æ”¹ä¸ºç½‘é¡µå…¨å±
</span></span></span><span class="line"><span class="cl"><span class="cm">     * é¿å…å¼¹çª—ç­‰å…ƒç´ åœ¨å…¨å±æ¨¡å¼ä¸‹ä¸å¯è§çš„é—®é¢˜ï¼ˆæ¨èï¼‰
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bodyAgent</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">Boolean</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fullscreenClass</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="s1">&#39;is-fullscreen&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * ä¸è°ƒç”¨å…¨å± APIï¼Œè€Œæ˜¯å°†å½“å‰å…ƒç´ æ’‘æ»¡ç½‘é¡µ
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pageOnly</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">Boolean</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * v-fullscreen æŒ‡ä»¤ä¿®é¥°ç¬¦ teleport è¿›å…¥å…¨å±æ—¶ç›®æ ‡å…ƒç´ ä¼šè¢«ç§»åŠ¨åˆ° document.body ä¸‹
</span></span></span><span class="line"><span class="cl"><span class="cm">     * vue-fullscreen æ’ä»¶å¤„ç†å¼¹çª—ç­‰å…ƒç´ åœ¨å…¨å±æ¨¡å¼ä¸‹ä¸å¯è§é—®é¢˜çš„æ–¹æ¡ˆï¼ˆä¸æ¨èï¼‰
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nx">teleport</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">Boolean</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">isFullscreen</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">options</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">target</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">bodyAgent</span> <span class="o">?</span> <span class="s1">&#39;document.body&#39;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">callback</span><span class="o">:</span> <span class="p">(</span><span class="nx">isFullscreen</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">this</span><span class="p">.</span><span class="nx">isFullscreen</span> <span class="o">=</span> <span class="nx">isFullscreen</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// ç½‘é¡µå…¨å±
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bodyAgent</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">target</span> <span class="o">!==</span> <span class="s1">&#39;document.body&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;is-fullscreen-fullpage&#39;</span><span class="p">,</span> <span class="nx">isFullscreen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// è§¦å‘äº‹ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="nx">isFullscreen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fullscreenClass</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">fullscreenClass</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">render</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">h</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">class</span><span class="o">:</span> <span class="s1">&#39;full-screen-toggler&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">attrs</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">isFullscreen</span> <span class="o">?</span> <span class="s1">&#39;é€€å‡ºå…¨å±&#39;</span> <span class="o">:</span> <span class="s1">&#39;å…¨å±&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">directives</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;fullscreen&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">value</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">modifiers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">pageOnly</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pageOnly</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">teleport</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">teleport</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="nx">h</span><span class="p">(</span><span class="s1">&#39;svg-icon&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">iconClass</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">isFullscreen</span> <span class="o">?</span> <span class="s1">&#39;exit-fullscreen&#39;</span> <span class="o">:</span> <span class="s1">&#39;fullscreen&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nx">full</span><span class="o">-</span><span class="nx">screen</span><span class="o">-</span><span class="nx">toggler</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nx">is</span><span class="o">-</span><span class="nx">fullscreen</span><span class="o">-</span><span class="nx">fullpage</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">position</span><span class="o">:</span> <span class="nx">fixed</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">height</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">background</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">z</span><span class="o">-</span><span class="nx">index</span><span class="o">:</span> <span class="mi">2000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">box</span><span class="o">-</span><span class="nx">sizing</span><span class="o">:</span> <span class="nx">border</span><span class="o">-</span><span class="nx">box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;page-container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">full-screen-toggler</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;.page-container&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">FullScreenToggler</span> <span class="nx">from</span> <span class="s1">&#39;@/components/FullScreenToggler&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FullScreenToggler</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item><item><title>åœ¨ Vue é¡¹ç›®ä¸­æ›´ä¼˜é›…åœ°ä½¿ç”¨ icon</title><link>https://lruihao.cn/posts/vue-svg-icon/</link><pubDate>Thu, 14 Sep 2023 11:24:48 +0800</pubDate><author>Lruihao</author><guid>https://lruihao.cn/posts/vue-svg-icon/</guid><description><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>åœ¨ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ° iconï¼Œicon çš„ä½¿ç”¨ç»å†äº†ä»å›¾ç‰‡åˆ°å­—ä½“ï¼Œå†åˆ° svg çš„æ¼”å˜è¿‡ç¨‹ï¼Œä¹Ÿäº§ç”Ÿå‡ºç›¸åº”çš„ icon åº“ï¼Œå¦‚é›ªç¢§å›¾ã€<a href="https://fontawesome.com/"target="_blank" rel="external nofollow noopener noreferrer">Font Awesome<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ã€<a href="https://www.iconfont.cn/"target="_blank" rel="external nofollow noopener noreferrer">Iconfont<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> ç­‰ç­‰ã€‚</p>
<p>éšç€å‰ç«¯çš„å‘å±•ï¼Œicon ä½¿ç”¨æ–¹æ¡ˆè½åœ¨äº† svg ä¸Šï¼Œsvg æœ‰ç€çŸ¢é‡å›¾çš„ä¼˜åŠ¿ï¼Œå¯ä»¥æ— é™æ”¾å¤§è€Œä¸å¤±çœŸï¼Œè€Œä¸” svg æœ¬èº«å°±æ˜¯ä¸€ç§ XML æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ HTML ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ CSS è¿›è¡Œæ ·å¼æ§åˆ¶ï¼Œä½†æ˜¯åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ svg æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­æ›´ä¼˜é›…çš„ä½¿ç”¨ svg iconã€‚</p>
<h2 id="å·¥å…·">å·¥å…·</h2>
<ul>
<li><a href="https://github.com/JetBrains/svg-sprite-loader"target="_blank" rel="external nofollow noopener noreferrer">svg-sprite-loader<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://github.com/svg/svgo-loader"target="_blank" rel="external nofollow noopener noreferrer">svgo-loader<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
</ul>
<p><code>svg-sprite-loader</code>ç”¨æ¥æ‰“åŒ… svg å›¾æ ‡ï¼Œ<code>svgo-loader</code> æ¥ç²¾ç®€æˆ‘ä»¬çš„ svg å†…å®¹ã€‚</p>
<h2 id="å°è£…ç»„ä»¶">å°è£…ç»„ä»¶</h2>
<p>åœ¨ <code>src/components</code> ç›®å½•ä¸‹æ–°å»º <code>SvgIcon.vue</code> ç»„ä»¶ï¼š</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="nt">v-if</span><span class="s">=&#34;isExternal&#34; :style=&#34;styleExternalIcon&#34; class=&#34;svg-external-icon svg-icon&#34; v-on=&#34;$listeners&#34; /&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">  &lt;svg v-else class=&#34;svg-icon&#34; aria-hidden=&#34;true&#34; v-on=&#34;$listeners&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">use</span> <span class="nt">:href</span><span class="s">=&#34;iconName&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;SvgIcon&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">iconClass</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">className</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isExternal</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="sr">/^(https?:\/\/|data:image)/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iconClass</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">iconName</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="sb">`#icon-</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">iconClass</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">styleExternalIcon</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">mask</span><span class="o">:</span> <span class="sb">`url(</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">iconClass</span><span class="si">}</span><span class="sb">) no-repeat 50% 50%`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;-webkit-mask&#39;</span><span class="o">:</span> <span class="sb">`url(</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">iconClass</span><span class="si">}</span><span class="sb">) no-repeat 50% 50%`</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nx">svg</span><span class="o">-</span><span class="nx">icon</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">width</span><span class="o">:</span> <span class="mi">1</span><span class="nx">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">height</span><span class="o">:</span> <span class="mi">1</span><span class="nx">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">vertical</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="o">-</span><span class="mf">0.15</span><span class="nx">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fill</span><span class="o">:</span> <span class="nx">currentColor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">overflow</span><span class="o">:</span> <span class="nx">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nx">svg</span><span class="o">-</span><span class="nx">external</span><span class="o">-</span><span class="nx">icon</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">currentColor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mask</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="nx">cover</span><span class="o">!</span><span class="nx">important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">display</span><span class="o">:</span> <span class="nx">inline</span><span class="o">-</span><span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install svg-sprite-loader svgo-loader -D
</span></span><span class="line"><span class="cl"><span class="c1"># æˆ–</span>
</span></span><span class="line"><span class="cl">yarn add svg-sprite-loader svgo-loader -D</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é…ç½®">é…ç½®</h2>
<p>ç»Ÿä¸€å°†æ‰€æœ‰çš„ icon éƒ½ä»¥ svg çš„å½¢å¼éƒ½æ”¾åœ¨ <code>src/assets/icons</code> ç›®å½•ä¸­ã€‚</p>
<p>ç„¶ååœ¨ <code>vue.config.js</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@vue/cli-service&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">dir</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">defineConfig</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">chainWebpack</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// set svg-sprite-loader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">svgPath</span> <span class="o">=</span> <span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;src/assets/icons&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">module</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">rule</span><span class="p">(</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">exclude</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">svgPath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">module</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">rule</span><span class="p">(</span><span class="s1">&#39;svg-icon&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="sr">/.svg$/</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">include</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">svgPath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;svg-sprite-loader&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">loader</span><span class="p">(</span><span class="s1">&#39;svg-sprite-loader&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">options</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">symbolId</span><span class="o">:</span> <span class="s1">&#39;icon-[name]&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// remove origin svg fill attr
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;svgo-loader&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">loader</span><span class="p">(</span><span class="s1">&#39;svgo-loader&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">tap</span><span class="p">((</span><span class="nx">options</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// åˆ é™¤ svg ä¸­ fill å’Œ fill-rule
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">plugins</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;removeAttrs&#39;</span><span class="p">,</span> <span class="nx">params</span><span class="o">:</span> <span class="p">{</span> <span class="nx">attrs</span><span class="o">:</span> <span class="s1">&#39;fill|fill-rule&#39;</span> <span class="p">}</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">      <span class="p">}))</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è‡ªåŠ¨å¼•å…¥">è‡ªåŠ¨å¼•å…¥</h2>
<p>è‡ªåŠ¨å¼•å…¥ <code>src/assets/icons</code> ä¸­çš„ iconï¼Œéœ€è¦ç”¨åˆ° webpack ä¸­çš„ <a href="https://webpack.docschina.org/guides/dependency-management/"target="_blank" rel="external nofollow noopener noreferrer">require.context<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>ã€‚</p>
<p>åœ¨ <code>src/main.js</code> ä¸­å¼•å…¥æ‰€æœ‰çš„ svg å›¾æ ‡ï¼Œä¹‹åå¯åœ¨æ–‡ä»¶å¤¹è‡ªè¡Œæ·»åŠ æˆ–è€…åˆ é™¤å›¾æ ‡ï¼Œæ‰€ä»¥å›¾æ ‡éƒ½ä¼šè¢«è‡ªåŠ¨å¯¼å…¥ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼š</p>
<div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">SvgIcon</span> <span class="nx">from</span> <span class="s1">&#39;@/components/SvgIcon&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// register svg component globally 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;SvgIcon&#39;</span><span class="p">,</span> <span class="nx">SvgIcon</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// require all svg
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">requireAll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">requireContext</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">requireContext</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">requireContext</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">context</span><span class="p">(</span><span class="s1">&#39;@/assets/icons&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="sr">/\.svg$/</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">requireAll</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨-icon">ä½¿ç”¨ icon</h2>
<div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">svg-icon</span> <span class="na">icon-class</span><span class="o">=</span><span class="s">&#34;fullscreen&#34;</span>  <span class="na">class</span><span class="o">=</span><span class="s">&#39;custom-class&#39;</span> <span class="p">/&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é¢œè‰²">é¢œè‰²</h3>
<p><code>svg-icon</code> é»˜è®¤ä¼šè¯»å–å…¶çˆ¶çº§çš„ <code>color fill: currentColor;</code></p>
<p>ä½ å¯ä»¥æ”¹å˜çˆ¶çº§çš„ <code>color</code> æˆ–è€…ç›´æ¥æ”¹å˜ <code>fill</code> çš„é¢œè‰²å³å¯ã€‚</p>
<h3 id="å¤§å°">å¤§å°</h3>
<p>å›¾æ ‡å¯ä» <a href="https://www.iconfont.cn/"target="_blank" rel="external nofollow noopener noreferrer">iconfont<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> é¡¹ç›®ä¸­ä¸‹è½½æˆ–è€…ç”± UI åˆ‡å›¾ï¼ŒåŒä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„ Svg Icon å›¾æ ‡å»ºè®®ç»Ÿä¸€å¤§å°è§„æ ¼ï¼Œæ¯”å¦‚ <code>128*128</code>ã€‚</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>æœ¬æ–‡ <a href="https://lruihao.github.io/vue-el-demo/#/icons"target="_blank" rel="external nofollow noopener noreferrer">ç¤ºä¾‹<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> ä»£ç å·²ä¸Šä¼ è‡³ <a href="https://github.com/Lruihao/vue-el-demo"target="_blank" rel="external nofollow noopener noreferrer">vue-el-demo<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> é¡¹ç›®ä¸­ï¼Œå¯è‡ªè¡Œä¸‹è½½æŸ¥çœ‹ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://juejin.cn/post/6844903517564436493"target="_blank" rel="external nofollow noopener noreferrer">æ‰‹æ‘¸æ‰‹ï¼Œå¸¦ä½ ä¼˜é›…çš„ä½¿ç”¨ icon<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://www.zhangxinxu.com/wordpress/2014/07/introduce-svg-sprite-technology/"target="_blank" rel="external nofollow noopener noreferrer">æœªæ¥å¿…çƒ­ï¼šSVG Sprites æŠ€æœ¯ä»‹ç»<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://www.zhangxinxu.com/wordpress/2016/02/svg-compress-tool-svgo-experience/"target="_blank" rel="external nofollow noopener noreferrer">SVG ç²¾ç®€å‹ç¼©å·¥å…· svgo ç®€ä»‹å’Œåˆä½“éªŒ<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://github.com/JetBrains/svg-sprite-loader"target="_blank" rel="external nofollow noopener noreferrer">svg-sprite-loader<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://github.com/svg/svgo"target="_blank" rel="external nofollow noopener noreferrer">svgo<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://github.com/svg/svgo-loader"target="_blank" rel="external nofollow noopener noreferrer">svgo-loader<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
</ul>]]></description></item><item><title>ç”¨é­”æ³•æ‰“è´¥é­”æ³• - ElBacktop Fix</title><link>https://lruihao.cn/posts/el-backtop-fix/</link><pubDate>Thu, 20 Jul 2023 11:08:18 +0800</pubDate><author>Lruihao</author><guid>https://lruihao.cn/posts/el-backtop-fix/</guid><description><![CDATA[<p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•ä¸€ä¸‹ç»§æ‰¿ <a href="https://element.eleme.cn/#/zh-CN/component/backtop"target="_blank" rel="external nofollow noopener noreferrer">ElBacktop<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> ç»„ä»¶å¹¶ä¿®å¤äº†ä¸€äº› bug çš„è¿‡ç¨‹ã€‚</p>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç”±äºæŸäº›åŸå› ï¼Œæˆ‘å¸Œæœ›åœ¨è·¯ç”±åˆ‡æ¢æ—¶ç»™æ¯ä¸ªé¡µé¢çš„æ€»å®¹å™¨éƒ½åŠ ä¸Šä¸€ä¸ªå…±åŒçš„ class <code>page-container</code>ï¼Œç„¶åæˆ‘å°±åœ¨å¸ƒå±€ä¸­é‡Œé¢åŠ äº†è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="nt">:class</span><span class="s">=&#34;classObj&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app-wrapper&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app-container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">topbar</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;header-container&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">el-container</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main-container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">sidebar</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;aside-container&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">el-container</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;is-vertical minor-container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">breadcrumb</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;breadcrumb-container&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="c">&lt;!--</span> <span class="nx">è¿™ä¸€è¡Œ</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">page-container</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;page-container&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="err">/el-container&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/el-container&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">el-backtop</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app-b2t&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;.page-container&#34;</span> <span class="nt">:visibility-height</span><span class="s">=&#34;50&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="p">&lt;</span><span class="nt">back-to-top</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app-b2t&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;.page-container&#34;</span> <span class="nt">:visibility-height</span><span class="s">=&#34;50&#34;</span> <span class="p">/&gt;</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Vue" data-lang="Vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">transition</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;fade-transform&#34;</span> <span class="na">mode</span><span class="o">=</span><span class="s">&#34;out-in&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">keep-alive</span> <span class="nt">:include</span><span class="s">=&#34;cachedViews&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">router-view</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/keep-alive&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">transition</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ²¡é”™ï¼Œç›¸å½“äºåœ¨ router-view ä¸Šç›´æ¥åŠ äº†ä¸€ä¸ª class <code>page-container</code>ã€‚</p>
<h2 id="é—®é¢˜">é—®é¢˜</h2>
<p>é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œæ­¤æ—¶ el-backtop çš„ target è®¾ç½®ä¸º <code>.page-container</code>ï¼Œä½†æ˜¯å½“æˆ‘åˆ‡æ¢è·¯ç”±æ—¶ï¼Œ<code>.page-container</code> ä¼šè¢«ç§»é™¤å†æ·»åŠ ä¸ºæ–°çš„é¡µé¢ï¼Œæ­¤æ—¶ el-backtop å°±ä¼šå¤±æ•ˆã€‚</p>
<p>åŸæ„æ˜¯æƒ³è®© el-backtop æŒ‡å‘æ¯ä¸€ä¸ªåŒ…å« <code>.page-container</code> çš„é¡µé¢ã€‚</p>
<h2 id="è§£å†³">è§£å†³</h2>
<p>RTFSCï¼Œå‘ç° el-backtop çš„ target å±æ€§åªä¼šåœ¨ mounted æ—¶åˆå§‹åŒ–ä¸€æ¬¡ï¼Œæ‰€ä»¥æƒ³åŠæ³•åœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢æ—¶é‡æ–°åˆå§‹åŒ–ä¸€ä¸‹ el-backtop çš„ target å±æ€§å°±è¡Œäº†ã€‚</p>
<ol>
<li>åˆ›å»º MutationObserver å®ä¾‹æ¥è§‚å¯Ÿ target çš„çˆ¶å…ƒç´ çš„å­å…ƒç´ å˜åŒ–å·²è§£å†³ä¸Šè¿° bug</li>
<li>å¢åŠ  target çš„ data-target å±æ€§ï¼Œç”¨äºæŒ‡å®š target çš„å­å…ƒç´ ä½œä¸ºæ»šåŠ¨å®¹å™¨</li>
</ol>
<p>æœ€åä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Vue" data-lang="Vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * BackToTop ç»§æ‰¿ el-backtop
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1. ä¿®å¤ el-backtop åœ¨ target è¢«ç§»é™¤åï¼Œæ— æ³•é‡æ–°åˆå§‹åŒ–çš„é—®é¢˜
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2. å¢åŠ  target çš„ data-target å±æ€§ï¼Œç”¨äºæŒ‡å®š target çš„å­å…ƒç´ ä½œä¸ºæ»šåŠ¨å®¹å™¨ã€‚ä¾‹å¦‚ï¼š&lt;div data-target=&#34;.list-pane&#34;&gt;&lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Backtop</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;element-ui&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">throttle</span> <span class="nx">from</span> <span class="s1">&#39;throttle-debounce/throttle&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BackToTop&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kr">extends</span><span class="o">:</span> <span class="nx">Backtop</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">el</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">container</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">observer</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">observeTarget</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">beforeDestroy</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ¸…é™¤äº‹ä»¶ç›‘å¬
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">throttledScrollHandler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åœæ­¢è§‚å¯Ÿ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="sb">`target is not existed: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// å¦‚æœ this.el æœ‰ data-target å±æ€§ï¼Œå°±ä½¿ç”¨ data-target å±æ€§çš„å€¼ä½œä¸º target
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">subEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="nx">subEl</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nx">subEl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">throttledScrollHandler</span> <span class="o">=</span> <span class="nx">throttle</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onScroll</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">throttledScrollHandler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * è§‚å¯Ÿ this.container æ˜¯å¦è¢«ç§»é™¤æˆ–è€…æ–°å¢
</span></span></span><span class="line"><span class="cl"><span class="cm">     * æ³¨æ„ router-view åˆ‡æ¢é¡µé¢æ­¥éª¤ï¼š1. æ–°å¢ router-view -&gt; 2. åˆ é™¤æ—§ router-view
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nx">observeTarget</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// åˆ›å»º MutationObserver å®ä¾‹å¹¶ä¼ å…¥å›è°ƒå‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">((</span><span class="nx">mutationsList</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">mutation</span> <span class="k">of</span> <span class="nx">mutationsList</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">mutation</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;childList&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// æ£€æµ‹åˆ°åˆ é™¤èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="nx">mutation</span><span class="p">.</span><span class="nx">removedNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">node</span> <span class="k">of</span> <span class="nx">mutation</span><span class="p">.</span><span class="nx">removedNodes</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="c1">// è§‚å¯Ÿå¦‚æœ this.container ä»é¡µé¢ä¸­è¢«ç§»é™¤äº†ï¼Œå°±æ¸…é™¤äº‹ä»¶ç›‘å¬
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                  <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">throttledScrollHandler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">                  <span class="k">break</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// æ£€æµ‹åˆ é™¤å‰æ˜¯å¦æœ‰æ–°å¢èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span> <span class="o">===</span> <span class="nx">mutation</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// è§‚å¯Ÿå¦‚æœ this.container è¢«åˆ é™¤å‰çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹æ˜¯ this.targetï¼Œå°±é‡æ–°åˆå§‹åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// è§‚å¯Ÿ this.container çˆ¶å…ƒç´ çš„å­å…ƒç´ å˜åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">parentNode</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">childList</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item><item><title>ä½¿ç”¨ Node.js è‡ªåŠ¨åˆ›å»º Vue çš„è·¯ç”±</title><link>https://lruihao.cn/posts/gen-router/</link><pubDate>Wed, 14 Jun 2023 00:11:17 +0800</pubDate><author>Lruihao</author><guid>https://lruihao.cn/posts/gen-router/</guid><description><![CDATA[<p>æœ€è¿‘åœ¨å†™ä¸€ä¸ª Vue æ’ä»¶ï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€äº›æµ‹è¯•é¡µé¢ï¼Œç”±äºéƒ½æ˜¯äº›é™æ€è·¯ç”±ï¼Œå°±æƒ³åˆ°ä¹‹å‰çœ‹åˆ°è¿‡çš„ä¸€ä¸ªé¡¹ç›®å°±æ˜¯ç”¨ Node.js æ¥è‡ªåŠ¨ç”Ÿæˆè·¯ç”±çš„ï¼Œäºæ˜¯å°±å€Ÿé‰´è¿‡æ¥æ”¹äº†ä¸€ä¸‹ã€‚</p>
<h2 id="æºç ">æºç </h2>
<blockquote>
<p>Gist: <a href="https://gist.github.com/Lruihao/d8f2984525dc9e78dd6a49e15f49cf38"target="_blank" rel="external nofollow noopener noreferrer">https://gist.github.com/Lruihao/d8f2984525dc9e78dd6a49e15f49cf38<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">os</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;os&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">vueDir</span> <span class="o">=</span> <span class="s1">&#39;./src/views/&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">routerFile</span> <span class="o">=</span> <span class="s1">&#39;./src/router.js&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="nx">vueDir</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;âŒ Could not list the directory.&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">routes</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">filename</span> <span class="k">of</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">filename</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">continue</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">ext</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filename</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">ext</span> <span class="o">!==</span> <span class="s1">&#39;vue&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">continue</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">routeName</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/-([a-z])/g</span><span class="p">,</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">match</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">match</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">routeDescription</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">contentFull</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">vueDir</span><span class="si">}${</span><span class="nx">filename</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// get route description from first line comment
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">match</span> <span class="o">=</span> <span class="sr">/&lt;!--\s*(.*)\s*--&gt;/g</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">contentFull</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">EOL</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">routeDescription</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">routes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`  {
</span></span></span><span class="line"><span class="cl"><span class="sb">    path: &#39;/</span><span class="si">${</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;home&#39;</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="nx">name</span><span class="si">}</span><span class="sb">&#39;,
</span></span></span><span class="line"><span class="cl"><span class="sb">    name: &#39;</span><span class="si">${</span><span class="nx">routeName</span><span class="si">}</span><span class="sb">&#39;,</span><span class="si">${</span><span class="nx">routeDescription</span> <span class="o">?</span> <span class="sb">`\n    meta: { description: &#39;</span><span class="si">${</span><span class="nx">routeDescription</span><span class="si">}</span><span class="sb">&#39; },`</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="si">}</span><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">    component: () =&gt; import(/* webpackChunkName: &#34;</span><span class="si">${</span><span class="nx">routeName</span><span class="si">}</span><span class="sb">&#34; */ &#39;@/views/</span><span class="si">${</span><span class="nx">filename</span><span class="si">}</span><span class="sb">&#39;),
</span></span></span><span class="line"><span class="cl"><span class="sb">  },`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="sb">`// This file is automatically generated by gen-router.js, please do not modify it manuallyï¼
</span></span></span><span class="line"><span class="cl"><span class="sb">import VueRouter from &#39;vue-router&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">import Vue from &#39;vue&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">Vue.use(VueRouter)
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">const routes = [
</span></span></span><span class="line"><span class="cl"><span class="sb"></span><span class="si">${</span><span class="nx">routes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">EOL</span><span class="p">)</span><span class="si">}</span><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">]
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">const router = new VueRouter({
</span></span></span><span class="line"><span class="cl"><span class="sb">  mode: &#39;hash&#39;,
</span></span></span><span class="line"><span class="cl"><span class="sb">  routes,
</span></span></span><span class="line"><span class="cl"><span class="sb">})
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">export default router
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">routerFile</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`âœ… Router generated successfully in </span><span class="si">${</span><span class="nx">routerFile</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç”Ÿæˆæ•ˆæœå¦‚ä¸‹ï¼š</p>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// This file is automatically generated by gen-router.js, please do not modify it manuallyï¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">VueRouter</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueRouter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">routes</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span> <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Home&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="cm">/* webpackChunkName: &#34;home&#34; */</span> <span class="s1">&#39;@/views/home.vue&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VueRouter</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;hash&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">routes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a href="https://github.com/sunzsh/vue-el-demo/blob/f5e9a2a9934c7040f4fa72663eb8c24b1e3b20c1/gen-router.js"target="_blank" rel="external nofollow noopener noreferrer">sunzsh/vue-el-demo<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>]]></description></item><item><title>Vue2 + tailwindcss åˆå§‹åŒ–</title><link>https://lruihao.cn/posts/v2-tailwind/</link><pubDate>Sat, 03 Jun 2023 17:38:44 +0800</pubDate><author>Lruihao</author><guid>https://lruihao.cn/posts/v2-tailwind/</guid><description><![CDATA[<h2 id="æ–°å»º-vue2-é¡¹ç›®">æ–°å»º Vue2 é¡¹ç›®</h2>
<p>é€šè¿‡ <code>vue-cli</code> åˆ›å»ºä¸€ä¸ªå« <code>v2-tailwind</code> çš„é¡¹ç›®ï¼š</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vue create vue2-tailwind</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ¹æ®éœ€è¦é€‰æ‹©å…¶ä»–çš„åŠŸèƒ½æ’ä»¶ï¼Œä¾‹å¦‚ï¼š<code>Babel, Router, Vuex, CSS Pre-processors, Linter</code>ã€‚</p>
<details>
  <summary>å…³äº ESLint</summary>
  å½“åœ¨ Vue åˆ›å»ºé¡¹ç›®æ—¶ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„ ESLint é…ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é€‰é¡¹åŠå…¶ä¼˜ç¼ºç‚¹å’Œæ³¨æ„äº‹é¡¹ï¼š
<ol>
<li>
<p><strong>ESLint with error prevention only</strong>:</p>
<ul>
<li>ä¼˜ç‚¹ï¼šè¿™ä¸ªé…ç½®åªä¼šå¸®åŠ©ä½ é˜²æ­¢ä»£ç ä¸­çš„é”™è¯¯ï¼Œå®ƒçš„è§„åˆ™ç›¸å¯¹å®½æ¾ã€‚é€‚ç”¨äºåˆšå¼€å§‹ä½¿ç”¨ ESLint æˆ–è€…å¸Œæœ›é¿å…å¤ªå¤šçº¦æŸçš„å¼€å‘è€…ã€‚</li>
<li>ç¼ºç‚¹ï¼šç”±äºè§„åˆ™ç›¸å¯¹å®½æ¾ï¼Œå¯èƒ½æ— æ³•å®Œå…¨ç¡®ä¿ä»£ç é£æ ¼çš„ä¸€è‡´æ€§ã€‚</li>
<li>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœä½ æƒ³è¦æ›´ä¸¥æ ¼çš„ä»£ç æ£€æŸ¥ï¼Œå¯ä»¥è€ƒè™‘å…¶ä»–é…ç½®ã€‚</li>
</ul>
</li>
<li>
<p><strong>ESLint + Airbnb config</strong>:</p>
<ul>
<li>ä¼˜ç‚¹ï¼šAirbnb çš„é…ç½®éå¸¸ä¸¥æ ¼ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ éµå¾ªæœ€ä½³å®è·µå’Œç¼–å†™é«˜è´¨é‡çš„ä»£ç ã€‚æ­¤å¤–ï¼Œå®ƒä¹ŸåŒ…å«äº†è®¸å¤š ES6+ çš„è§„åˆ™ã€‚</li>
<li>ç¼ºç‚¹ï¼šç”±äºå…¶ä¸¥æ ¼æ€§ï¼Œåˆå­¦è€…å¯èƒ½éœ€è¦èŠ±è´¹æ›´å¤šæ—¶é—´æ¥è§£å†³ ESLint æŠ¥å‘Šçš„é—®é¢˜ã€‚</li>
<li>æ³¨æ„äº‹é¡¹ï¼šåœ¨ä½¿ç”¨æ­¤é…ç½®æ—¶ï¼Œè¯·ç¡®ä¿ä½ ç†è§£å¹¶æ¥å— Airbnb çš„ä»£ç è§„èŒƒã€‚</li>
</ul>
</li>
<li>
<p><strong>ESLint + Standard config</strong>:</p>
<ul>
<li>ä¼˜ç‚¹ï¼šStandard çš„é…ç½®æ—¨åœ¨æä¾›ä¸€ä¸ªç›¸å¯¹ç®€å•ã€ä¸€è‡´çš„ä»£ç é£æ ¼ï¼Œé€‚åˆé‚£äº›å–œæ¬¢â€œé›¶é…ç½®â€çš„å¼€å‘è€…ã€‚</li>
<li>ç¼ºç‚¹ï¼šè¿™ä¸ªé…ç½®å¯èƒ½ä¸é€‚ç”¨äºæ‰€æœ‰é¡¹ç›®ï¼Œå› ä¸ºå®ƒæœ‰è‡ªå·±çš„ä»£ç é£æ ¼è¦æ±‚ã€‚</li>
<li>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœä½ çš„å›¢é˜Ÿæˆ–é¡¹ç›®å·²ç»æœ‰è‡ªå·±çš„ç¼–ç è§„èŒƒï¼Œä½¿ç”¨ Standard é…ç½®å¯èƒ½ä¼šå¯¼è‡´ä¸ä¸€è‡´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ESLint + Prettier</strong>:</p>
<ul>
<li>ä¼˜ç‚¹ï¼šPrettier æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼Œå¯ä»¥ä¸ ESLint ç»“åˆä½¿ç”¨ï¼Œä»¥ç¡®ä¿ä»£ç é£æ ¼çš„ä¸€è‡´æ€§ã€‚è¿™å¯ä»¥æé«˜ä»£ç å¯è¯»æ€§ï¼Œå¹¶å‡å°‘åœ¨ä»£ç å®¡æŸ¥è¿‡ç¨‹ä¸­å…³æ³¨æ ¼å¼é—®é¢˜çš„æ—¶é—´ã€‚</li>
<li>ç¼ºç‚¹ï¼šPrettier å¯èƒ½ä¼šè¦†ç›–æŸäº› ESLint è§„åˆ™ï¼Œæ‰€ä»¥éœ€è¦èŠ±ä¸€äº›æ—¶é—´ç¡®ä¿é…ç½®æ­£ç¡®ã€‚</li>
<li>æ³¨æ„äº‹é¡¹ï¼šä¸ºäº†é¿å…å†²çªï¼Œè¯·ç¡®ä¿ ESLint å’Œ Prettier çš„è§„åˆ™æ­£ç¡®é…ç½®ã€‚</li>
</ul>
</li>
</ol>
<p>æ€»ä¹‹ï¼Œåœ¨é€‰æ‹© ESLint é…ç½®æ—¶ï¼Œéœ€è¦æ ¹æ®ä½ çš„å›¢é˜Ÿã€é¡¹ç›®éœ€æ±‚å’Œä¸ªäººåå¥½æ¥æƒè¡¡ã€‚é€‰æ‹©é€‚å½“çš„é…ç½®å¯ä»¥å¸®åŠ©ä½ æé«˜ä»£ç è´¨é‡å¹¶ä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼ã€‚</p>
</details>
<h2 id="å®‰è£…-tailwindcss">å®‰è£… tailwindcss</h2>
<p>æ‰“å¼€é¡¹ç›®ï¼Œå®‰è£… <code>tailwindcss</code>ï¼š</p>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> vue2-tailwind
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£… tailwindcss ä½ç‰ˆæœ¬åŠç›¸å…³æ’ä»¶</span>
</span></span><span class="line"><span class="cl">npm install tailwindcss@npm:@tailwindcss/postcss7-compat @tailwindcss/postcss7-compat postcss@^7 autoprefixer@^9</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶ï¼š</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># åˆ›å»º postcss.config.js, tailwind.config.js</span>
</span></span><span class="line"><span class="cl">npx tailwindcss init -p</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">tailwindcss</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">autoprefixer</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">purge</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;./src/App.vue&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;./src/views/**/*.{vue,js,ts,jsx,tsx}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;./src/components/**/*.{vue,js,ts,jsx,tsx}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">darkMode</span><span class="o">:</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="c1">// or &#39;media&#39; or &#39;class&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;jit&#39;</span><span class="p">,</span> <span class="c1">// æ˜¯å¦å¼€å¯ jit æ¨¡å¼ï¼Œå¼€å¯ä»¥åç¼–è¯‘ä¼šæ›´å¿«ï¼Œå½“ç„¶ï¼Œtailwindcss ç‰ˆæœ¬éœ€è¦åœ¨ 2.1 ä»¥ä¸Š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">theme</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">variants</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€ååœ¨ <code>main.js</code> ä¸­å¼•å…¥ <code>tailwindcss</code></p>
<div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;tailwindcss/tailwind.css&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å¯åŠ¨é¡¹ç›®">å¯åŠ¨é¡¹ç›®</h2>
<p>å¯åŠ¨é¡¹ç›®ï¼Œä¿®æ”¹æ¨¡æ¿ä¸­çš„ class è¿›è¡Œæµ‹è¯•ã€‚</p>
<div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run serve</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;bg-gray-100&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;container mx-auto&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;flex justify-center items-center h-screen&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;text-4xl text-gray-700&#34;</span><span class="p">&gt;</span><span class="nx">Hello</span> <span class="nx">Vue2</span> <span class="o">+</span> <span class="nx">tailwindcss</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item><item><title>åŸºäº leancloud-storage å®ç°çš„æ— åç«¯è®°è´¦æœ¬</title><link>https://lruihao.cn/projects/bill-note/</link><pubDate>Tue, 02 Mar 2021 21:46:40 +0000</pubDate><author>Lruihao</author><guid>https://lruihao.cn/projects/bill-note/</guid><description><![CDATA[<h2 id="èµ·å› ">èµ·å› </h2>
<div class="details admonition info open">
    <div class="details-summary admonition-title">
      <i class="icon fa-solid fa-info-circle fa-fw" aria-hidden="true"></i>èµ·å› <i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content"><p>äº‹æƒ…æ˜¯é€™æ¨£ï¼Œå¹´å‰å’Œæœ‹å‹ä¸€èµ·åˆç§Ÿäº†ä¸€å€‹æˆ¿å­ï¼Œç„¶å¾Œæï¼Œç”Ÿæ´»å˜›ï¼Œé™¤äº†é–‹å¿ƒï¼Œç•¶ç„¶æ˜¯ä¹¾é£¯æœ€å¤§å•¦ï¼</p>
<p>è‡ªç„¶å°±æœƒæœ‰è³¼ç‰©ï¼Œè²·èœç­‰æ—¥å¸¸æ¶ˆè²»ï¼Œé‚£å°±è¦è¨˜è³¬ï¼Œä¸€é–‹å§‹æ˜¯å„è‡ªè¨˜åœ¨æ‰‹æ©Ÿçš„ä¾¿ç°½ä¸Šï¼Œæœ€å¾Œå†ç®—ä¸€ä¸‹ï¼›<br>
ä¸‰å€‹äººï¼Œä¸€å…±ä¸ƒç§çµ„åˆæ¶ˆè²»ï¼Œæ’é™¤å„è‡ªæ¶ˆè²»çš„ä¸‰ç¨®æƒ…æ³ï¼Œä¹Ÿæœ‰å››ç¨® (<code>AB, AC, BC, ABC</code>)ã€‚å¥½éº»ç…©å•Šï¼ï¼ï¼</p>
</div>
    </div>
  </div>
<h2 id="ç¶“é">ç¶“é</h2>
<p>ä½œç‚ºä¸€å€‹ç¨‹åºçŒ¿ï¼Œæ€éº¼èƒ½æ¥å—é€™éº¼éº»ç…©çš„è¨˜è³¬æ–¹å¼å‘¢ï¼Œæ‹¿èµ·ç­†å°±é–‹å§‹ç•«ï¼Œæ–¼æ˜¯æœ‰äº†ä¸‹é¢é€™å¼µåœ–çš„å…¬å¼ã€‚ç°¡å–®èªªæ˜ä¸€ä¸‹å°±æ˜¯ï¼š<br>
è¨­å‰é¢èªªçš„å››ç¨®çµ„åˆç‚ºï¼š<code>X1, X2, X3, X4</code>ï¼Œå€‹äººå¯¦éš›ä»˜æ¬¾ç¸½é¡ç‚ºï¼š<code>Y1, Y2, Y3</code>ï¼Œé‚£éº¼å¸¶å…¥æœªçŸ¥æ•¸ï¼Œæˆ‘å€‘å°±å¯ä»¥ç®—å‡ºæ¯å€‹äººæœ€å¾Œçµç®—æ™‚çš„éŒ¢ï¼š<code>S1, S2, S3</code>ï¼Œ<br>
ç¶œä¸Šæ‰€è¿°ï¼Œå¾ˆå¥½ç†è§£ï¼Œç•¶ <code>S &gt;= 0</code> æ™‚ï¼Œæ”¶ç´…åŒ…ï¼Œç•¶ <code>S &lt; 0</code> æ™‚ï¼Œç™¼ç´…åŒ…ã€‚</p>
<p></p>
<p>OKï¼Œä¸€å€‹ç°¡å–®çš„åˆä¸­æ–¹ç¨‹å¼å·²ç¶“åˆ°ä½äº†ï¼Œä¸‹ä¸€æ­¥ï¼Œæ€è€ƒä¸€ä¸‹ï¼Œç”¨ä»€éº¼ä¾†é‹ä½œé€™å€‹é€™å€‹æ–¹ç¨‹ã€‚ä¾†ï¼Œå…ˆè·‘å€‹é¡Œï¼Œæ˜¥ç¯€æœŸé–“ï¼Œä¸æ˜¯æ¯å¤©éƒ½è¦åœ¨é¨°è¨Šæ–‡æª”ä¸Šå¡«è¡¨è¨˜éŒ„æ´»å‹•è»Œè·¡å—ï¼Ÿ å†å›ä¾†ï¼Œé‚£ä¸å¦‚å°±ç”¨ excel å¯¦ç¾å§ï¼Œä¸‰å€‹äººéƒ½å¯ä»¥åœ¨æ‰‹æ©Ÿä¸Šç·¨è¼¯ã€‚å¥½çš„ï¼Œèªªåšå°±åšã€‚</p>
<p>ä¸€é “æ“ä½œï¼Œ10 minutes later&hellip;<br>
åªæ–°å»ºäº†ä¸€å€‹ excel æ–‡ä»¶ï¼ŒO.o! ä¸æœƒ excelï¼Œæœæ–·æ”¾æ£„ï¼Œå¦å°‹ä»–è·¯ã€‚</p>
<h2 id="çµæœ">çµæœ</h2>
<p>å›åˆ°æœ¬è·ï¼Œé‚£ä¸å¦‚å¯«å€‹ç¶²ç«™å§ï¼Œå¯æ˜¯ç•¢æ¥­å¾Œï¼Œå­¸ç”Ÿæ©Ÿæœå‹™å™¨ä¹ŸéæœŸäº†ï¼Œæ€éº¼æï¼Ÿé‚£å°±å¯«å€‹ç´”å‰ç«¯çš„ï¼Œæ•¸æ“šå‘¢å­˜å“ªè£¡ï¼Ÿ<br>
åˆ¥æ€¥ï¼Œé‡æ–°æ“¼ä¸€æ“¼éœ€æ±‚å…ˆï¼š</p>
<ul>
<li>å­˜å–æ¶ˆè²»æ•¸æ“š</li>
<li>è¨ˆç®—æ¯æœˆï¼Œå¯¦ä»˜ï¼ˆç¸½åˆ†ï¼‰ï¼Œæ‡‰ä»˜ä»¥åŠæœ€å¾Œè¨ˆç®—çµç®—é‡‘é¡</li>
<li>æŒ‰æœˆæŸ¥è©¢ï¼Œæœˆçµè³¬å–®</li>
<li>ä¸‰äººçš†å¯ç·¨è¼¯</li>
</ul>
<p>ä¸»è¦å°±æ˜¯å­˜å–æ•¸æ“šé€™é»ï¼Œæ²’æœ‰æœå‹™å™¨ï¼Œæ•¸æ“šåº«æ€éº¼å¯¦ç¾ï¼Ÿ<br>
valine å¯ä»¥å¯¦ç¾ç„¡å¾Œç«¯ï¼Œé‚£æˆ‘æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ï¼Œleancloud æ–‡æª”èµ°ä¸€æ³¢ï¼Œç„¶å¾Œâ€œæ•¸æ“šè¡¨â€è¨­è¨ˆä¸€ä¸‹ï¼Œå…¶å¯¦æ˜¯ leancloud-storage Object ï¼Œæ–¼æ˜¯æœ‰äº†ä»¥ä¸‹æ±è¥¿ï¼Œæºç¢¼æ”¾åœ¨ Github</p>
<!-- markdownlint-disable-next-line MD034 -->
<a href="http://github.com/Lruihao/bill-note"target="_blank" rel="external nofollow noopener noreferrer" class="card-link"><span class="cl-backdrop" style="--cl-bg-url: url(/fixit.min.svg);"></span>
    <span class="cl-content">
      <span class="cl-text">
        <span class="cl-title">bill-note</span>
        <span class="cl-meta">
          <svg class="cl-icon-link" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1z" fill="#a9a9b3"></path><path d="M610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" fill="#a9a9b3"></path></svg>
          <span class="cl-url">http://github.com/Lruihao/bill-note</span>
        </span>
      </span><svg class="cl-icon-globe" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path d="M960 512c0 249.408-203.2 448-448 448-244.778667 0-448-198.592-448-448S262.592 64 512 64s448 198.592 448 448" fill="#2196F3"></path><path d="M507.52 718.08c0-8.96-4.48-13.44-13.44-17.92-26.88-8.96-53.76-8.96-76.16-31.381333-4.48-8.96-4.48-17.92-8.96-26.88-8.96-8.96-31.36-13.44-44.8-17.92h-89.6c-13.44-4.48-22.4-22.4-31.36-35.84 0-4.48 0-13.461333-8.96-13.461334-8.96-4.458667-17.92 4.501333-26.88 0-4.48-4.458667-4.48-8.96-4.48-13.418666 0-13.461333 8.96-26.901333 17.92-35.861334 13.44-8.96 26.88 4.48 40.32 4.48 4.48 0 4.48 0 8.96 4.48 13.44 4.48 17.92 22.4 17.92 35.861334v8.96c0 4.48 4.48 4.48 8.96 4.48 4.48-22.4 4.48-44.821333 8.96-67.2 0-26.88 26.88-53.781333 49.28-62.72 8.96-4.458667 13.44 4.501333 22.4 0 26.88-8.96 94.08-35.84 80.64-71.658667-8.96-31.381333-35.84-62.698667-71.68-58.24-8.96 4.501333-13.44 8.96-22.4 13.461333-13.44 8.96-40.32 35.84-53.76 35.84-22.4-4.48-22.4-35.84-17.92-49.301333 4.48-17.92 44.8-76.138667 71.68-67.178667l17.92 17.92c8.96 4.48 22.4 4.48 35.84 4.48 4.48 0 8.96 0 13.44-4.48 4.48-4.48 4.48-4.48 4.48-8.96 0-13.44-13.44-26.901333-22.4-35.861333s-22.4-17.92-35.84-22.378667c-44.8-13.461333-116.48 4.458667-152.32 35.84-35.84 31.36-62.72 85.12-80.64 129.92-8.96 26.88-17.92 62.698667-22.4 94.08-4.48 22.4-8.96 40.32 4.48 62.698667 13.44 26.88 40.32 53.781333 67.2 71.68 17.92 13.44 53.76 13.44 71.68 35.84 13.44 17.941333 8.96 40.32 8.96 62.72 0 26.88 17.92 49.28 26.88 71.658667 4.48 13.461333 8.96 31.381333 13.44 44.821333 0 4.48 4.48 31.36 4.48 35.84 26.88 13.44 49.28 26.901333 80.64 35.861333 4.48 0 22.4-26.901333 22.4-31.381333 13.44-13.44 22.4-31.36 35.84-40.32 8.96-4.48 17.92-8.96 26.88-17.941333 8.96-8.96 13.44-26.88 17.92-40.32 4.48-8.938667 8.96-26.858667 4.48-40.298667M516.48 305.92c4.48 0 8.96-4.48 17.92-8.96 13.44-8.96 26.901333-22.4 40.32-31.36 13.461333-8.96 26.901333-22.4 35.861333-31.36 13.44-8.96 22.4-26.88 26.88-40.341333 4.48-8.96 17.941333-26.88 13.44-40.32-4.48-8.96-26.88-13.44-35.84-17.92C579.2 126.698667 547.84 122.24 512 122.24c-13.44 0-31.36 4.458667-35.84 17.92-4.48 22.4 13.44 17.92 31.36 22.4 0 0 4.48 35.84 4.48 40.32 4.48 22.421333-8.96 35.84-8.96 58.24 0 13.44 0 35.84 8.96 44.8h4.48zM892.8 619.52c4.501333-8.96 4.501333-22.4 8.96-31.36 4.501333-22.421333 4.501333-44.8 4.501333-67.2 0-44.8-4.501333-89.578667-17.92-129.92-8.96-13.44-13.461333-26.88-17.941333-40.341333-8.96-22.378667-22.4-44.8-40.32-62.698667-17.92-22.4-40.341333-85.12-80.64-67.2-13.44 4.501333-22.4 22.421333-31.36 31.381333l-26.88 40.32c-4.501333 4.48-8.96 13.44-4.501333 17.92 0 4.48 4.501333 4.48 8.96 4.48 8.96 4.501333 13.461333 4.501333 22.421333 8.96 4.48 0 8.96 4.501333 4.48 8.96 0 0 0 4.501333-4.48 4.501334-22.421333 22.4-44.8 40.32-67.2 62.698666-4.48 4.48-8.96 13.44-8.96 17.92s4.48 4.48 4.48 8.96c0 4.501333-4.48 4.501333-8.96 8.96-8.96 4.501333-17.92 8.96-22.4 13.461334-4.48 8.96 0 22.4-4.48 31.36-4.48 22.4-17.941333 40.32-26.901333 62.72-8.96 13.418667-13.418667 26.88-22.378667 40.32 0 17.92-4.501333 31.36 4.458667 44.8 22.421333 31.36 62.72 13.44 94.08 26.901333 8.96 4.458667 17.92 4.458667 22.421333 13.418667 13.418667 13.461333 13.418667 35.861333 17.92 49.301333 4.458667 17.92 8.96 35.84 17.92 53.76 4.48 22.421333 13.44 44.821333 17.92 62.72 40.341333-31.36 76.16-67.178667 103.04-112 26.88-31.424 40.341333-67.242667 53.76-103.104" fill="#CDDC39"></path></svg></span></a>
<h3 id="æ•¸æ“šè¨­è¨ˆ">æ•¸æ“šè¨­è¨ˆ</h3>
<p>å» leancloud åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå†æ–°å¢ä¸€ä¸ª Bill Class, è¡¥å……ä¸€ä¸‹å­—æ®µï¼š</p>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pay</td>
<td>Number</td>
<td>æ¶ˆè´¹é‡‘é¢</td>
</tr>
<tr>
<td>pay_description</td>
<td>String</td>
<td>æ¶ˆè´¹æè¿°</td>
</tr>
<tr>
<td>pay_type</td>
<td>String</td>
<td>æ¶ˆè´¹ç±»å‹</td>
</tr>
<tr>
<td>pay_user</td>
<td>String</td>
<td>ä»˜æ¬¾äºº</td>
</tr>
</tbody>
</table>
<h3 id="ä¸»è¦é‚è¼¯">ä¸»è¦é‚è¼¯</h3>
<h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4>
<p>set for yourself.</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">AV</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">appId</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">appKey</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">serverURL</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å­˜æ•¸æ“š">å­˜æ•¸æ“š</h4>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//è¨˜è³¬æäº¤æŒ‰éˆ•äº‹ä»¶ç›£è½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.submit&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">formPay</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#form-pay&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="s1">&#39;Bill&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bill</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;pay&#39;</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">formPay</span><span class="p">.</span><span class="nx">pay</span><span class="p">.</span><span class="nx">value</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bill</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;pay_type&#39;</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">formPay</span><span class="p">.</span><span class="nx">pay_type</span><span class="p">.</span><span class="nx">value</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bill</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;pay_user&#39;</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">formPay</span><span class="p">.</span><span class="nx">pay_user</span><span class="p">.</span><span class="nx">value</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bill</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;pay_description&#39;</span><span class="p">,</span> <span class="nx">formPay</span><span class="p">.</span><span class="nx">pay_description</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bill</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">formPay</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;ä¿å­˜å¤±æ•—&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å–æ•¸æ“š">å–æ•¸æ“š</h4>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ç²å–æ­·å²æ¶ˆè²»è¨˜éŒ„æ•¸æ“š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param [start=0] é–‹å§‹ä½ç½®
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param [count=15] æ¯æ¬¡æŸ¥è©¢ç­†æ•¸
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">getBillData</span><span class="p">(</span><span class="nx">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryBill</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="s1">&#39;createdAt&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="nx">start</span> <span class="o">*</span> <span class="nx">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="nx">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">find</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">billLength</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">billLength</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">billVm</span><span class="p">.</span><span class="nx">noMore</span> <span class="o">=</span> <span class="nx">billLength</span> <span class="o">!==</span> <span class="nx">count</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="nx">bill</span> <span class="k">of</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">billVm</span><span class="p">.</span><span class="nx">bills</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">            <span class="nx">pay</span><span class="o">:</span> <span class="nx">bill</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">pay</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">payType</span><span class="o">:</span> <span class="nx">payType</span><span class="p">[</span><span class="nx">bill</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">pay_type</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nx">payUser</span><span class="o">:</span> <span class="nx">payUser</span><span class="p">[</span><span class="nx">bill</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">pay_user</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nx">payDescription</span><span class="o">:</span> <span class="nx">bill</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">pay_description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">payDt</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">bill</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">).</span><span class="nx">toLocaleString</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">          <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">billVm</span><span class="p">.</span><span class="nx">noMore</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ç²å–æœˆè³¬å–®æ•¸æ“š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param month å¹´æœˆä»½ fmt: yyyy-MM
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">getMonthBill</span><span class="p">(</span><span class="nx">month</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">dateTime</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">month</span><span class="si">}</span><span class="sb"> 00:00:00`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">startMonth</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">dateTime</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">nextMonth</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">dateTime</span><span class="p">).</span><span class="nx">setMonth</span><span class="p">(</span><span class="nx">startMonth</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">startDateQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s1">&#39;Bill&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">startDateQuery</span><span class="p">.</span><span class="nx">greaterThanOrEqualTo</span><span class="p">(</span><span class="s1">&#39;createdAt&#39;</span><span class="p">,</span> <span class="nx">startMonth</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">endDateQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s1">&#39;Bill&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">endDateQuery</span><span class="p">.</span><span class="nx">lessThan</span><span class="p">(</span><span class="s1">&#39;createdAt&#39;</span><span class="p">,</span> <span class="nx">nextMonth</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">MonthBillQuery</span> <span class="o">=</span> <span class="nx">AV</span><span class="p">.</span><span class="nx">Query</span><span class="p">.</span><span class="nx">and</span><span class="p">(</span><span class="nx">startDateQuery</span><span class="p">,</span> <span class="nx">endDateQuery</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">MonthBillQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">billVm</span><span class="p">.</span><span class="nx">monthBill</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payType0</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payType1</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payType2</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payType3</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payUser0</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payUser1</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">payUser2</span><span class="o">:</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="nx">bill</span> <span class="k">of</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="p">{</span> <span class="nx">pay</span><span class="p">,</span> <span class="nx">pay_type</span><span class="p">,</span> <span class="nx">pay_user</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">bill</span><span class="p">.</span><span class="nx">attributes</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">billVm</span><span class="p">.</span><span class="nx">monthBill</span><span class="p">[</span><span class="sb">`payType</span><span class="si">${</span><span class="nx">pay_type</span><span class="si">}</span><span class="sb">`</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">pay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">billVm</span><span class="p">.</span><span class="nx">monthBill</span><span class="p">[</span><span class="sb">`payUser</span><span class="si">${</span><span class="nx">pay_user</span><span class="si">}</span><span class="sb">`</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">pay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŠ€è¡“æ£§">æŠ€è¡“æ£§</h3>
<ul>
<li>leancloud-storage</li>
<li>Vue.js</li>
<li>HTML,CSS,JS</li>
</ul>
<h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>ç°¡å–®ç¸½çµä¸€ä¸‹ï¼Œç™»å½•åŠŸèƒ½ä¸åšï¼Œå®‰ä¸å®‰å…¨è‡ªå·±è¯´äº†ç®—ã€‚åˆ é™¤ä¿®æ”¹åŠŸèƒ½ä¹Ÿä¸åšï¼Œç›´æ¥ä¸Š leancloud æ“ä½œï¼Œcss ç¾åŒ–çš„æ ·å¼ä¹Ÿä¸å†™ï¼Œå¹²å‡€åˆå«ç”Ÿï¼<br>
ç„¶åè¡ç”Ÿä¸€ä¸‹ï¼Œä»€ä¹ˆè¿‡å¹´æ–—åœ°ä¸»ï¼Œå¤©ç‚¸ï¼Œéº»å°†ï¼Œå­—ç‰Œè®°è´¦ç³»ç»Ÿé‚£ä¸ä¹Ÿæ˜¯åŒç†å¯å¾—å˜›ï¼</p>
<p>over!</p>
<p><figure><a class="lightgallery" href="/projects/bill-note/images/demo.jpg" data-thumbnail="/projects/bill-note/images/demo.jpg" data-sub-html="<h2>æ•ˆæœ</h2><p>Demo</p>"></a><figcaption class="image-caption">æ•ˆæœ</figcaption>
  </figure></p>]]></description></item></channel></rss>