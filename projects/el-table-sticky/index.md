# å¦‚ä½•è®© Element UI è¡¨å¤´ã€è¡¨å°¾ã€æ¨ªå‘æ»šåŠ¨æ¡å¸é¡¶å¸åº•å›ºå®šï¼Ÿ


æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼å®žçŽ° Element UI è¡¨æ ¼çš„è¡¨å¤´å¸é¡¶ã€è¡¨å°¾å¸åº•ã€æ»šåŠ¨æ¡å¸åº•ä»¥åŠé«˜åº¦è‡ªé€‚åº”åŠŸèƒ½ã€‚

&lt;!--more--&gt;

## èƒŒæ™¯

Element UI çš„è¡¨æ ¼ç»„ä»¶åœ¨ä½¿ç”¨æ—¶ï¼Œå¦‚æžœè¡¨æ ¼å†…å®¹è¿‡å¤šï¼Œè¡¨æ ¼ä¼šå‡ºçŽ°æ»šåŠ¨æ¡ï¼Œä½†æ˜¯è¡¨å¤´ä¸ä¼šå¸é¡¶ï¼Œè¡¨å°¾åˆè®¡è¡Œä¹Ÿä¸ä¼šå¸åº•ï¼Œè¿™æ ·åœ¨è¡¨æ ¼å†…å®¹è¿‡å¤šæ—¶ï¼Œè¡¨å¤´å’Œè¡¨å°¾åˆè®¡è¡Œå°±ä¼šè¢«é®æŒ¡ï¼Œå¦‚æžœæœ‰æ¨ªå‘æ»šåŠ¨æ¡ï¼Œæ¯æ¬¡æƒ³æ»šåŠ¨å¿…é¡»æ»‘åŠ¨åˆ°æœ€åº•ä¸‹ï¼Œè¿™ä¸€ç³»åˆ—ç—›ç‚¹ï¼Œéžå¸¸å½±å“ç”¨æˆ·ä½“éªŒã€‚

**Element UI çš„è§£å†³åŠžæ³•**ï¼šé€šè¿‡è®¾ç½® `max-height` æˆ–è€… `height` å±žæ€§æ¥å®žçŽ°ä¸Šè¿°éœ€æ±‚ã€‚

**Element UI çš„è§£å†³ä¸è¶³ç‚¹**ï¼šé«˜åº¦å€¼åªæ”¯æŒè®¾ç½®æ•°å­—åž‹ï¼Œåœ¨å®žé™…å¼€å‘ä¸­å¾€å¾€éœ€è¦å€ŸåŠ© JS æ¥è®¡ç®—ã€‚

ä¸ºäº†è§£å†³ä»¥ä¸Šç—›ç‚¹/éœ€æ±‚ï¼Œå‡å°‘å¼€å‘å’Œç»´æŠ¤æˆæœ¬ï¼ŒäºŽæ˜¯æˆ‘å¼€å‘äº† [el-table-sticky](https://github.com/Lruihao/el-table-sticky) æ’ä»¶ï¼Œ[åœ¨çº¿ç¤ºä¾‹](https://lruihao.github.io/el-table-sticky/)ã€‚

&lt;!-- markdownlint-disable-next-line no-bare-urls --&gt;
{{&lt; link href=&#34;https://github.com/Lruihao/el-table-sticky&#34; content=&#34;el-table-stick&#34; card=true &gt;}}

&gt; *å¦‚æžœä½ è§‰å¾—è¿™ä¸ªæ’ä»¶è¿˜ä¸é”™ï¼Œèµä¸ª star å§ ðŸ˜›ï¼Œå¦‚æžœä½ æœ‰æ›´å¥½çš„å®žçŽ°æ–¹æ¡ˆï¼Œæ¬¢è¿Žæ issue æˆ–è€… PRã€‚*

## è§£å†³æ€è·¯

el-table-sticky æ’ä»¶ä»Žä¸¤ä¸ªä¸åŒçš„è§’åº¦è§£å†³é—®é¢˜ï¼š

1. é€šè¿‡ `position: sticky` å±žæ€§ï¼Œè®© el-table çš„è¡¨å¤´ç­‰å…ƒç´ å›ºå®š

2. æ²¿ç”¨ Element UI çš„ `max-height` å’Œ `height` å±žæ€§ï¼Œé€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼ï¼Œè®© el-table çš„è¡¨æ ¼å†…å®¹é«˜åº¦è‡ªé€‚åº”

æ’ä»¶åŒ…å« 4 ä¸ªæŒ‡ä»¤ï¼š

- `v-sticky-header`ï¼šè¡¨å¤´å¸é¡¶
- `v-sticky-footer`ï¼šè¡¨å°¾å¸åº•
- `v-sticky-scroller`ï¼šæ¨ªå‘æ»šåŠ¨æ¡å¸åº•
- `v-height-adaptive`ï¼šé«˜åº¦è‡ªé€‚åº”

ç›®å‰ 4 ä¸ªæŒ‡ä»¤åœ¨ 1.x ç‰ˆæœ¬éƒ½å·²å¼€å‘å®Œæˆï¼Œå·²å‘å¸ƒåˆ° npm ä¸Šï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```bash
npm install @cell-x/el-table-sticky
```

å…·ä½“ä½¿ç”¨æ–¹å¼ï¼Œæœ¬æ–‡ä¸åšèµ˜è¿°ï¼Œè¯¦è§ README.mdã€‚

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®žçŽ°è¿™äº›åŠŸèƒ½ã€‚

### è¡¨å¤´å¸é¡¶&amp;è¡¨å°¾å¸åº•

è¡¨å¤´å¸é¡¶æ˜¯æˆ‘æœ€è¿«åˆ‡æƒ³è¦è§£å†³çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨ 0.x ç‰ˆæœ¬å¼€å‘å®Œï¼Œæˆ‘å°±é©¬ä¸Šå‘å¸ƒå¹¶åœ¨å…¬å¸è€é¡¹ç›®ä¸­å¼•å…¥äº†ã€‚

æ€è·¯æ‹†è§£ï¼š

1. æ‰¾åˆ° el-table__header å¹¶èµ‹äºˆ sticky top ç‰¹æ€§
2. Debug å‘çŽ°å¦‚æžœ el-table-column è®¾ç½®äº† fixed å€¼ï¼ŒElement UI ä½¿ç”¨çš„æ˜¯ fixed å®šä½ï¼Œå¹¶å°† el-table__header å¯¹åº”çš„æ ä½éšè—
3. el-table__header sticky åŽä¸ºäº†è®©å›ºå®šæ ä½ä¿æŒå’Œ Element UI ä¸€æ ·çš„æ•ˆæžœï¼Œéœ€è¦æ‰¾åˆ°è¿™äº›æ ä½ï¼Œè®¾ç½®ä¸º stickyï¼Œç„¶åŽæŒ‰å·¦å³æ–¹å‘å †å ä½ç½®

å®žçŽ°è¡¨å¤´å¸é¡¶åŽï¼Œå†çœ‹è¡¨å°¾åˆå¹¶è¡Œå¸åº•æ•ˆæžœä¹Ÿå°±æ˜¯ä¾è‘«èŠ¦ç”»ç“¢ï¼Œæ€è·¯ä¸€æ ·ï¼ŒäºŽæ˜¯ä¸ºäº†å¤ç”¨ä»£ç ï¼Œæˆ‘æŠ½ç¦»å‡ºæ¥ä¸€ä¸ª [Sticky Class](https://github.com/Lruihao/el-table-sticky/blob/main/src/utils/sticky.js#L9)ã€‚

### é«˜åº¦è‡ªé€‚åº”

&gt; æ²¿ç”¨ Element UI çš„ `max-height` å’Œ `height` å±žæ€§ï¼Œæ‰€ä»¥ el-table åˆå§‹åŒ–æ—¶å¿…é¡»è®¾ç½®é«˜åº¦ã€‚

è¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œç›‘å¬ el-table å…ƒç´ çš„ resizeï¼Œç„¶åŽ JS è®¡ç®—å‡ºè¡¨æ ¼çš„å¯ç”¨é«˜åº¦ï¼Œæœ€åŽè°ƒç”¨ `$table.layout.setHeight` è®¾ç½®é«˜åº¦å³å¯ã€‚

### æ¨ªå‘æ»šåŠ¨æ¡å¸åº•

è¿™ä¸ªæŒ‡ä»¤çš„å®žçŽ°æˆ‘æ”¾åœ¨æœ€åŽï¼Œä¸»è¦çš„éš¾ç‚¹åœ¨äºŽå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æ»šåŠ¨æ¡ä»£æ›¿åŽŸç”Ÿæ»šåŠ¨æ¡çš„é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å¼€å‘è¿‡ç¨‹ï¼š

1. æœ€å¼€å§‹çœ‹åˆ°äº†ä¸€ä¸ªæ’ä»¶ [el-table-horizontal-scroll](https://github.com/mizuka-wu/el-table-horizontal-scroll)ï¼Œå®ƒçš„åšæ³•æ˜¯æ‰‹åŠ¨ç»™ el-table åŠ ä¸Šä¸€ä¸ª el-scrollbar å¹¶ç»‘å®šäº‹ä»¶å¤„ç†ï¼ŒäºŽæ˜¯å†³å®šä½¿ç”¨å®ƒçš„æ–¹æ¡ˆï¼Œä½†æ˜¯çœ‹äº†æºç ï¼Œå®ƒä½¿ç”¨çš„ fixed å®šä½å’Œæˆ‘é¢„æƒ³æœ‰å·®è·ï¼Œè€Œä¸”æ‰‹åŠ¨ç»‘å®šäº‹ä»¶ï¼Œå¯èƒ½æœ‰å¾ˆå¤šç»†èŠ‚é—æ¼ï¼Œç»´æŠ¤èµ·æ¥æˆ–æœ‰è¯¸å¤šä¸ä¾¿ã€‚
2. ç„¶åŽï¼Œæˆ‘æƒ³èƒ½ä¸èƒ½é€šè¿‡ render å‡½æ•°ç›´æŽ¥æ¸²æŸ“ä¸€ä¸ª el-scrollbarï¼Œæˆ‘å°±åŽ»çœ‹ el-scrollbar çš„æºç ï¼Œæ‰“å¼€æºç æœ‰æƒŠå–œï¼Œç¬¬ä¸€è¡Œæ³¨é‡Šæ‰¾åˆ°äº†[gemini-scrollbar](https://github.com/noeldelgado/gemini-scrollbar) è¿™ä¸ªæ’ä»¶ï¼Œæ‰“å¼€ Github çœ‹äº†ä¸€ä¸‹ï¼Œèƒ½å¤Ÿå®žçŽ°é¢„æœŸæ•ˆæžœã€‚
3. å¼€é€ æ€è·¯ï¼š
   1. åœ¨ el-table ä¸­åˆ›å»ºä¸€ä¸ªç©ºå…ƒç´ å½“ä½œ scrollerï¼Œå®½åº¦ä¿æŒå’Œè¡¨æ ¼å†…å®¹å®½åº¦ä¸€è‡´
   2. ä¸º scroller åˆ›å»ºè‡ªå®šä¹‰æ»šåŠ¨æ¡ï¼Œå¹¶èµ‹äºˆ sticky bottom ç‰¹æ€§
   3. åŒæ­¥ el-table æ¨ªå‘æ»šåŠ¨çš„è¡Œä¸ºåˆ° scroller
   4. åŒæ­¥ scroller æ¨ªå‘æ»šåŠ¨çš„è¡Œä¸ºåˆ° el-table

A few moments later...

ç»è¿‡ä¸€ç•ª codeï¼Œå®žçŽ°äº†æ¨ªå‘æ»šåŠ¨æ¡çš„å¸åº•å›ºå®šæ•ˆæžœï¼Œä½†æ˜¯åŸºäºŽ [gemini-scrollbar](https://github.com/noeldelgado/gemini-scrollbar) å®žçŽ°ï¼Œå­˜åœ¨ä»¥ä¸‹å·²çŸ¥é—®é¢˜ï¼š

- [ ] safari æµè§ˆå™¨å­˜åœ¨å…¼å®¹æ€§[^1]

- [x] å½“ç¦ç”¨åŽŸç”Ÿæ»šåŠ¨æ¡æ—¶ï¼Œgemini-scrollbar è®¡ç®—æ»‘å—åç§»è·ç¦»æ—¶å­˜åœ¨è¯¯å·®ï¼Œ[è¯¦è§](https://github.com/Lruihao/el-table-sticky/blob/5c80091e21841fdb78264cde52ab1588b7991e02/src/utils/scroller.js#L75-L83)

æœ€åŽä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œå°† `v-sticky-scroller` çš„åŠŸèƒ½å†…ç½®åˆ°äº† `v-sticky-header` å’Œ `v-sticky-footer` æŒ‡ä»¤ä¸­ï¼Œä½¿ç”¨æ—¶æ— éœ€é‡å¤ä½¿ç”¨ã€‚

## æ€»ç»“

ä¸€å¿µå¯¹å¼€æºè ¢è ¢æ¬²åŠ¨ï¼Œä¸€å¿µå¯¹ç»´æŠ¤çŠ¹è±«ä¸å†³ï¼Œä¸€å¿µæˆå°±å¼€æºï¼Œä¸€å¿µæˆå°±è‡ªå·±ã€‚

{{&lt; center-quote &gt;}}
Non sunt multiplicanda entia sine necessitate

è‹¥æ— å¿…è¦ï¼Œå‹¿å¢žå®žä½“
{{&lt; /center-quote &gt;}}

ä¸åˆ°è¿«ä¸å¾—å·²ï¼Œä¸è¦è½»æ˜“é€ è½®å­ï¼Œè¦å–„äºŽå‘çŽ°å’Œåˆ©ç”¨å·²æœ‰çš„è½®å­ã€æœ€ç†æƒ³çš„çŠ¶æ€å°±æ˜¯æ°¸è¿œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‚

ä½†æ˜¯é€šè¿‡é€ è½®å­ï¼Œå¯ä»¥æ›´å¥½çš„å­¦ä¹ å’Œç†è§£æŠ€æœ¯ï¼Œä¹Ÿèƒ½ä½“ä¼šåˆ°å¾ˆå¤šå†™ä¸šåŠ¡ä»£ç ä¸èƒ½æ„Ÿå—åˆ°çš„å¿«ä¹ã€‚

å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚

&lt;!-- footnote reference definition --&gt;
[^1]: *å¦‚æœ‰å¿…è¦ï¼Œä»¥åŽç‰ˆæœ¬éœ€è¦æ›¿æ¢ gemini-scrollbar å®žçŽ°è‡ªå®šä¹‰æ»šåŠ¨æ¡çš„åŠŸèƒ½ã€‚*


---

> ä½œè€…: [Lruihao](https://github.com/Lruihao)  
> URL: https://lruihao.cn/projects/el-table-sticky/  

